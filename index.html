<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>+1教你学函电 - Pro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- 升级 Babel 到最新版本以支持更多语法特性 -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Noto+Sans+SC:wght@400;500;700&display=swap');
        
        body {
            font-family: 'Inter', 'Noto Sans SC', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background-color: #f8fafc;
            /* 更加细腻的字体渲染 */
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* 动画定义 */
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes float { 0% { transform: translateY(0px); } 50% { transform: translateY(-6px); } 100% { transform: translateY(0px); } }
        /* 背景光斑动画优化，更柔和 */
        @keyframes blob { 
            0% { transform: translate(0px, 0px) scale(1); opacity: 0.4; } 
            33% { transform: translate(30px, -50px) scale(1.1); opacity: 0.5; } 
            66% { transform: translate(-20px, 20px) scale(0.9); opacity: 0.4; } 
            100% { transform: translate(0px, 0px) scale(1); opacity: 0.4; } 
        }

        .animate-fade-in { animation: fadeIn 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards; }
        .animate-slide-up { animation: slideUp 0.8s cubic-bezier(0.16, 1, 0.3, 1) forwards; }
        .animate-float { animation: float 6s ease-in-out infinite; }
        .animate-blob { animation: blob 10s infinite; }
        .animation-delay-2000 { animation-delay: 2s; }
        .animation-delay-4000 { animation-delay: 4s; }

        .perspective-1000 { perspective: 1000px; }
        .transform-style-3d { transform-style: preserve-3d; }
        .backface-hidden { backface-visibility: hidden; }
        
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        
        /* 更好的玻璃拟态 */
        .glass-header {
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border-bottom: 1px solid rgba(226, 232, 240, 0.6);
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-900 selection:bg-indigo-500 selection:text-white">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;

        // --- 工具函数 ---
        function shuffleArray(array) {
            const newArr = [...array];
            for (let i = newArr.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArr[i], newArr[j]] = [newArr[j], newArr[i]];
            }
            return newArr;
        }

        // --- 图标组件 (使用统一的细线条风格，更显高级) ---
        const IconBase = ({ size = 24, className = "", children, ...props }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className} {...props}>{children}</svg>
        );
        const CheckCircle = (props) => <IconBase {...props}><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></IconBase>;
        const XCircle = (props) => <IconBase {...props}><circle cx="12" cy="12" r="10"/><line x1="15" y1="9" x2="9" y2="15"/><line x1="9" y1="9" x2="15" y2="15"/></IconBase>;
        const RefreshCw = (props) => <IconBase {...props}><path d="M21 2v6h-6"/><path d="M3 12a9 9 0 0 1 15-6.7L21 8"/><path d="M3 22v-6h6"/><path d="M21 12a9 9 0 0 1-15 6.7L3 16"/></IconBase>;
        const ChevronRight = (props) => <IconBase {...props}><polyline points="9 18 15 12 9 6"/></IconBase>;
        const ChevronLeft = (props) => <IconBase {...props}><polyline points="15 18 9 12 15 6"/></IconBase>;
        const GraduationCap = (props) => <IconBase {...props}><path d="M22 10v6M2 10l10-5 10 5-10 5z"/><path d="M6 12v5c3 3 9 3 12 0v-5"/></IconBase>;
        const AlertCircle = (props) => <IconBase {...props}><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></IconBase>;
        const FileText = (props) => <IconBase {...props}><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/></IconBase>;
        const Globe = (props) => <IconBase {...props}><circle cx="12" cy="12" r="10"/><line x1="2" y1="12" x2="22" y2="12"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></IconBase>;
        const PenTool = (props) => <IconBase {...props}><path d="m12 19 7-7 3 3-7 7-3-3z"/><path d="m18 13-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"/><path d="m2 2 7.586 7.586"/><circle cx="11" cy="11" r="2"/></IconBase>;
        const Check = (props) => <IconBase {...props}><polyline points="20 6 9 17 4 12"/></IconBase>;
        const MousePointerClick = (props) => <IconBase {...props}><path d="m9 9 5 12 1.8-5.2L21 14M7.2 2.2 8 5.1"/><path d="m5.1 8-2.9-.8"/><line x1="14" y1="4" x2="14" y2="7"/><line x1="10" y1="4" x2="11" y2="6"/></IconBase>;
        const HelpCircle = (props) => <IconBase {...props}><circle cx="12" cy="12" r="10"/><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/><line x1="12" y1="17" x2="12.01" y2="17"/></IconBase>;
        const ArrowRight = (props) => <IconBase {...props}><line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/></IconBase>;
        const Star = (props) => <IconBase {...props}><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></IconBase>;
        const ShuffleIcon = (props) => <IconBase {...props}><polyline points="16 3 21 3 21 8"/><line x1="4" y1="20" x2="21" y2="3"/><polyline points="21 16 21 21 16 21"/><line x1="15" y1="15" x2="21" y2="21"/><line x1="4" y1="4" x2="9" y2="9"/></IconBase>;
        const BookX = (props) => <IconBase {...props}><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/><path d="m14.5 7-5 5"/><path d="m9.5 7 5 5"/></IconBase>;
        const Trash2 = (props) => <IconBase {...props}><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/><line x1="10" y1="11" x2="10" y2="17"/><line x1="14" y1="11" x2="14" y2="17"/></IconBase>;
        const Bookmark = (props) => <IconBase {...props}><path d="m19 21-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"/></IconBase>;

        // --- DATA SOURCE ---

        const mcqData = [
            { id: 1, q: "We __________ that with joint efforts business between us will be developed to our mutual benefit.", options: ["are convince", "convinced", "convincing", "are convinced"], ans: 3, explanation: "固定搭配 'be convinced that...' 意为'确信'。这里是被动语态结构表示状态。" },
            { id: 2, q: "We wish to introduce __________ the largest exporter of fabrics of high quality.", options: ["that we are", "it that we are", "ourselves as", "ourselves to be"], ans: 2, explanation: "固定句型 'introduce oneself as...' (介绍自己是...)。C选项是最地道的商务表达。" },
            { id: 3, q: "We are looking forward to __________.", options: ["hearing from you soon", "receive your reply soon", "receiving from you soon", "you reply soon"], ans: 0, explanation: "'look forward to' 中的 'to' 是介词，后面接动名词(doing)或名词。A选项 'hearing from you' 是最常用的结束语。" },
            { id: 4, q: "You informed us that your representative was traveling __ air and would arrive __ Guangzhou on Monday.", options: ["in; at", "by; in", "by; at", "in; by"], ans: 1, explanation: "交通方式用 'by' (by air/bus)；到达大城市/国家用 'in'，到达小地点(如车站)用 'at'。" },
            { id: 5, q: "A business letter should always be __________.", options: ["concise", "precise", "incise", "excise"], ans: 0, explanation: "商务信函的7C原则之一：Concise (简洁)。" },
            { id: 6, q: "Please inform us __________ delivery date and payment terms.", options: ["in", "on", "at", "of"], ans: 3, explanation: "固定搭配 'inform sb of sth' (通知某人某事)。" },
            { id: 7, q: "Please check the enclosed fax opening the credit to ensure that it __________ your instructions.", options: ["agrees", "agrees to", "agrees with", "agrees upon"], ans: 2, explanation: "'agree with' 表示与...一致/相符。" },
            { id: 8, q: "We confirm __________ accepted your counter proposal yesterday.", options: ["have", "having", "to have", "has been"], ans: 1, explanation: "'confirm' 后接动名词形式 'having done' 表示确认已经做过某事。" },
            { id: 9, q: "Please be __________ that we would do all we can to support you as far as your sales territory is concerned.", options: ["ensured", "insured", "made sure", "assured"], ans: 3, explanation: "'Please be assured that...' 是固定商务句型，意为'请放心...'。" },
            { id: 10, q: "Our company acts __________ the sole agent for your products.", options: ["for", "on", "as", "under"], ans: 2, explanation: "'act as' 意为'担任/充当...的角色'。" },
            { id: 11, q: "We __ your name and address __ the Commercial Counsellor's Office of the Chinese Embassy in Ghana.", options: ["have known; in", "have learned; by", "have given; by", "have learned; from"], ans: 3, explanation: "从某处得知用 'learn from'。" },
            { id: 12, q: "Your letter expressing the hope of entering into business connection with us __________ with thanks.", options: ["have been received", "has been received", "have received", "has received"], ans: 1, explanation: "主语是 'Your letter' (单数)，且是被接收，故用 'has been received'。" },
            { id: 13, q: "We are looking forward to developing, together with friends at home and abroad and __________ a glorious future.", options: ["building up", "build up", "building", "build"], ans: 0, explanation: "and 连接并列成分，developing 和 building up 并列，都跟在 look forward to 后面。" },
            { id: 14, q: "We take the liberty of writing to you __________ establishing business relations.", options: ["hope", "in hope", "in the hope of", "hoping"], ans: 2, explanation: "固定短语 'in the hope of' (怀着...的希望)。" },
            { id: 15, q: "We have learned your name and address in the International Trade News __________ your company was introduced as one of the leading trading companies in China.", options: ["which", "that", "in that", "where"], ans: 3, explanation: "定语从句，先行词是 News，从句中不缺主宾，缺地点/场景状语，故用 'where' (在报纸上)。" },
            { id: 16, q: "We are one of the leading exporters __________ all kinds of computers of high quality.", options: ["trade in", "trading on", "trading in", "trade for"], ans: 2, explanation: "trade in (经营/买卖)。这里用现在分词 trading 作后置定语修饰 exporters。" },
            { id: 17, q: "We have learnt your corporation from your CCPIT __________ we have been in good relations for many years.", options: ["with which", "which", "with that", "that"], ans: 0, explanation: "be in good relations WITH sb. 介词提前，故用 with which。" },
            { id: 18, q: "We believe there is a __________ market in our area for moderately priced goods of the kind mentioned above.", options: ["promised", "promising", "promise", "promoting"], ans: 1, explanation: "promising market (有前景的市场)。" },
            { id: 19, q: "When __________, please state your terms of payment and a trade discount for companies that buy in fairly large quantities.", options: ["reply", "replied", "to reply", "replying"], ans: 3, explanation: "When replying 是 When you are replying 的省略形式。" },
            { id: 20, q: "We are sending you __________ separate post the samples for the new season.", options: ["to", "for", "by", "in"], ans: 2, explanation: "固定短语 'by separate post' (另封邮寄)。" },
            { id: 21, q: "Samples of our plastic kitchen-ware __________ you asked in your enquiry of September 3 are being sent to you today.", options: ["which", "for which", "to which", "in which"], ans: 1, explanation: "ask for sth (索要)。for 提前，变成 for which。" },
            { id: 22, q: "As this model was so popular with our customers, we would like to know if it is still __________. ", options: ["available", "respectable", "acceptable", "reasonable"], ans: 0, explanation: "available (可获得的/有货的)。" },
            { id: 23, q: "I would appreciate __________ me an up-to-date price list for your building materials.", options: ["you to send", "your send", "you send", "your sending"], ans: 3, explanation: "appreciate doing sth (感激做某事)。your sending 是动名词的复合结构。" },
            { id: 24, q: "Our firm is a leading importer __________ industrial chemicals.", options: ["dealing by", "dealing in", "deal with", "deal in"], ans: 1, explanation: "importer dealing in (经营...的进口商)。deal in 表示经营商品。" },
            { id: 25, q: "We'll be very pleased if you can quote us __________ a better price for the goods we inquired in our letter of Feb. 9.", options: ["/", "for", "at", "with"], ans: 0, explanation: "'quote us a price' 是双宾语结构，quote sb sth，中间不需要介词。" },
            { id: 26, q: "We should like to take this __________ to inquire about the price of washing machines.", options: ["occasion", "opening", "chance", "opportunity"], ans: 3, explanation: "take this opportunity to do sth (借此机会做某事)，商务函电常用语。" },
            { id: 27, q: "If the prices are __________, we trust important business can materialize.", options: ["in line", "in the line", "on line", "on the line"], ans: 0, explanation: "in line (一致/符合市场水平)，此处指价格公道。" },
            { id: 28, q: "We hope you could __________ us a special discount of 3% on orders.", options: ["admit", "offer", "send", "let"], ans: 1, explanation: "offer a discount (提供折扣)。" },
            { id: 29, q: "We have pleasure in enclosing a detailed price list for the goods you __________ in your letter.", options: ["informed", "said", "told", "required"], ans: 3, explanation: "goods you required (你方需要的货物)。" },
            { id: 30, q: "If you could increase the __________ to 10%, we shall be pleased to buy the complete stock.", options: ["cost", "stock", "discount", "price"], ans: 2, explanation: "根据句意，只有增加 discount (折扣) 买方才更愿意买下所有库存。" },
            { id: 31, q: "I'm sorry to say the items you required are __________, but we'll E-mail you as soon as the articles are available.", options: ["out of stock", "sold up", "in stock", "committed"], ans: 0, explanation: "out of stock (缺货)。" },
            { id: 32, q: "We are pleased to __________ our latest price list for the goods you required.", options: ["close", "enclose", "inclose", "put in"], ans: 1, explanation: "enclose (随信附上)。" },
            { id: 33, q: "We can grant you a special discount of 5% __________ repeat orders.", options: ["in", "of", "for", "on"], ans: 3, explanation: "discount on... (在...方面的折扣)。" },
            { id: 34, q: "Please __________ me if you need any further information.", options: ["contact", "contact with", "contact on", "contact to"], ans: 0, explanation: "contact 是及物动词，直接接宾语，不加介词。" },
            { id: 35, q: "Thank you for your __________ in our range of luggage. We shall be pleased to supply your requirements.", options: ["like", "agreement", "interest", "favor"], ans: 2, explanation: "thank you for your interest in... (感谢你对...的兴趣)。" },
            { id: 36, q: "We can supply wooden cloth ranging __ white through red __ black.", options: ["/; and", "from; to", "from; and", "from; till"], ans: 1, explanation: "ranging from A to B (范围从A到B)。" },
            { id: 37, q: "We were very pleased to receive your letter inquiring __________ leisure products.", options: ["/", "into", "on", "for"], ans: 3, explanation: "inquire for goods (询购商品)。inquire about/into 一般指询问情况或调查。" },
            { id: 38, q: "The purpose of a sales letter is to __________ the prospective customer's interest.", options: ["attract", "arouse", "attend", "alter"], ans: 1, explanation: "arouse interest (引起兴趣)。" },
            { id: 39, q: "A sales confirmation should be counter-signed by __________.", options: ["the seller", "both parties", "the bank", "the buyer"], ans: 1, explanation: "Sales Confirmation (销售确认书) 需要买卖双方(both parties) 签字生效。" },
            { id: 40, q: "If Mr. White won't agree to sign the contract, __________.", options: ["neither she will", "neither won't she", "neither will she", "she won't neither"], ans: 2, explanation: "Neither 倒装句，表示“她也不会”。" },
            { id: 41, q: "We hope to do __________ business with you in the near future.", options: ["the newly", "fresh", "novel", "the latest"], ans: 1, explanation: "fresh business (新的业务/更多业务)。" },
            { id: 42, q: "We don't think we can put the business through __________ you revise your terms and conditions.", options: ["unless", "expect", "only if", "in addition"], ans: 0, explanation: "unless (除非)。put business through (达成交易)。" },
            { id: 43, q: "In many cases, it is necessary to begin your letter with a brief introduction __________ who you are and what you do.", options: ["for", "to", "as", "of"], ans: 3, explanation: "introduction of (关于...的介绍)。" },
            { id: 44, q: "We shall be glad to send you sample-cutting books and pamphlets of our new products __________. ", options: ["with request", "as request", "upon request", "at request"], ans: 2, explanation: "upon request (一经要求/应请求)。" },
            { id: 45, q: "Our silk garments are durable __ use, beautiful __ design and rich __________ traditional Chinese art.", options: ["in; in; in", "of; of; in", "for; in; of"], ans: 0, explanation: "durable in use (耐用); beautiful in design (设计精美); rich in (富有...)。" },
            { id: 46, q: "We hope our latest computers will sell __________ in your market.", options: ["popular", "a ready market", "a fast seller", "like hot cakes"], ans: 3, explanation: "sell like hot cakes (热销/畅销)。" },
            { id: 47, q: "We specialize __________ all kinds of metals and are always ready to buy in large quantities.", options: ["in", "from", "on", "at"], ans: 0, explanation: "specialize in (专营)。" },
            { id: 48, q: "We are enclosing our Purchase Confirmation No.200469 __________ for your signature.", options: ["on duplicate", "in duplicate", "for duplicate", "to duplicate"], ans: 1, explanation: "in duplicate (一式两份)。" },
            { id: 49, q: "We are making you the following offer subject to your acceptance reaching us __________ April 20.", options: ["not later than", "don't later than", "doesn't later than", "not to later than"], ans: 0, explanation: "商务英语中表示'不迟于'用 'not later than'。" },
            { id: 50, q: "Today I've sent you a catalogue __________ you will see our range in sanitary wares.", options: ["to which", "of which", "in which", "which"], ans: 2, explanation: "in which = in the catalogue。在目录中你可以看到..." },
            { id: 51, q: "Toto bathroom equipment has an unrivalled reputation for high quality and design __________. ", options: ["for very keen prices", "for very keen price", "at very keen prices", "at very keened prices"], ans: 2, explanation: "at ... prices (以...的价格)。keen prices 指极具竞争力的低价。" },
            { id: 52, q: "We feel you may be interested in some of our other products and enclose a descriptive booklet __________.", options: ["to your reference", "in your reference", "on your reference", "for your reference"], ans: 3, explanation: "for your reference (供你参考)。" },
            { id: 53, q: "As no direct steamer is available from here to London, the goods will __________ in transit.", options: ["have to be transshipped", "have to been transshipped", "have to transship", "have to being transshipped"], ans: 0, explanation: "have to be transshipped (必须转运)。被动语态。" },
            { id: 54, q: "The prices are exclusive of the sales tax but __________ delivery to your warehouse and are valid for a month from the date of this letter.", options: ["including", "included", "to include", "include"], ans: 0, explanation: "include/including。此处 prices... include (谓语)。选项A (including) 也常用于商务伴随结构。" },
            { id: 55, q: "We are enclosing herewith one copy of our Order No.6876 placing an order with you for your electronic products __________ 120,000 pounds.", options: ["with the value totaled", "to the value totaled", "with the value totaling", "as to the value totaling"], ans: 1, explanation: "to the value of/totaling (总价值为...)。" },
            { id: 56, q: "As we are in urgent need of these products, please __________ the goods immediately.", options: ["have shipment of", "have shipment to", "make shipment of", "make shipment to"], ans: 2, explanation: "make shipment of (装运...)。" },
            { id: 57, q: "Thank you for your Order No.1 for pillowcases and assure you that all the items you required are __________.", options: ["in stocks", "at stocks", "at stock", "in stock"], ans: 3, explanation: "固定短语 'in stock' (有现货)。" }
        ];

        const fillBlanksData = [
            {
                section: "Section A",
                words: ["catalogue", "notify", "due to", "refer", "as a rule", "trade", "draw up", "exceptional", "interval", "price list", "business", "request"],
                questions: [
                    { q: "Shall I direct the letter to his ______ address or to his home address?", a: "business" },
                    { q: "At your ______. I will call on your company at some time.", a: "request" },
                    { q: "I can ______ you to the well-known firm of Smith & Co. of your city, as to my character and stand.", a: "refer" },
                    { q: "I know we (the seller) should ______ a contract and the buyer has to sign it.", a: "draw up" },
                    { q: "Usually we receive a handsome premium rebate from our underwriter at regular ______.", a: "interval" },
                    { q: "I wonder if you can tell me when the train from New York is ______ arrive.", a: "due to" },
                    { q: "They decided to expand border ______ with neighboring countries and entrepot trade.", a: "trade" },
                    { q: "Nevertheless as an ______ measure, we have decided to overlook its late submission.", a: "exceptional" },
                    { q: "Now, let's turn to the price. Can I have a look at your ______?", a: "price list" },
                    { q: "We'll ______ you as soon as your remittance comes.", a: "notify" }
                ]
            },
            {
                section: "Section B",
                words: ["enter into", "facilitate", "establish", "in Charge of", "dispatch", "client", "up to date", "account", "connection", "for one's reference", "quote", "mutual"],
                questions: [
                    { q: "We have quoted you the lowest price to ______ sale.", a: "facilitate" },
                    { q: "Please guarantee ______ in time to reach us by the end of this month.", a: "dispatch" },
                    { q: "The lowest prices we can ______ now are as follows.", a: "quote" },
                    { q: "They advised their ______ to merge with another company.", a: "client" },
                    { q: "I am here to discuss the possibility to ______ business relation with your corporation.", a: "establish" },
                    { q: "We trade on the principle of equality and ______ benefit.", a: "mutual" },
                    { q: "We are writing to you with a desire to open an ______ with you.", a: "account" },
                    { q: "Since you all agree to the offer and therefore ______ a contract.", a: "enter into" },
                    { q: "All the information you have got is ______ from the computer.", a: "up to date" },
                    { q: "Our sales representatives pay regular visits to these buyers and have established excellent ______ with them.", a: "connection" }
                ]
            },
            {
                section: "Section C",
                words: ["in compliance with", "vary from", "superior", "discount", "in regard to", "stock", "competitive", "on behalf of", "rather than", "up to", "compliance", "market"],
                questions: [
                    { q: "The arbitration proceeding will be carried out ______ the conventional rule.", a: "in compliance with" },
                    { q: "Can your company offer a ______ to us if we buy large quantities of the computers?", a: "discount" },
                    { q: "We expect you to quote your lowest prices and would like to know whether you can supply from ______.", a: "stock" },
                    { q: "The general manager signed the document ______ the company.", a: "on behalf of" },
                    { q: "We found your machine tools ______ international standard.", a: "up to" },
                    { q: "Then what do you think would be a ______ price?", a: "competitive" },
                    { q: "In ______ with your table of 12th, we have opened L/C today.", a: "compliance" },
                    { q: "But you know fully well that our product is of ______ quality.", a: "superior" },
                    { q: "It is said our company is in the ______ for a big, expensive car.", a: "market" },
                    { q: "The former seems simpler ______ the registration procedures.", a: "in regard to" }
                ]
            },
            {
                section: "Section D",
                words: ["in terms of", "invalid", "cordially", "subject to", "allowance", "by", "measure up to", "quality", "utilize", "assure", "assortment", "hesitate"],
                questions: [
                    { q: "You mean you reduce the price ______ 10%. I still think it is rather high.", a: "by" },
                    { q: "The offer is firm ______ your reply reaching us before the end of this month.", a: "subject to" },
                    { q: "The new techniques ______ advanced world standards.", a: "measure up to" },
                    { q: "______ money, he's quite rich, but not in terms of happiness.", a: "in terms of" },
                    { q: "As the mistake is ours, we agree to make an ______ of 2%.", a: "allowance" },
                    { q: "The end-products are inevitably of top ______ and highly specialized.", a: "quality" },
                    { q: "Joint efforts will ______ better progress in our business.", a: "assure" },
                    { q: "If you have any questions, please don't ______ to ask.", a: "hesitate" },
                    { q: "You are ______ invited to a reception to be given in our ministry on Saturday evening.", a: "cordially" },
                    { q: "An early order will ensure you get just the first-pick ______ you desire.", a: "assortment" }
                ]
            },
            {
                section: "Section E",
                words: ["pleasure", "decline", "introduce", "relations", "beneficial", "glad", "market", "merchants", "position", "information", "promote", "accept"],
                questions: [
                    { q: "Your letter expressing the hope of entering into business ______ with us has been received.", a: "relations" },
                    { q: "We wish to ______ ourselves to you as a state-operated corporation.", a: "introduce" },
                    { q: "We approach you today in the hope of establishing mutually ______ business relations with you.", a: "beneficial" },
                    { q: "As you know, a large number of overseas ______ are anxious to do business with us.", a: "merchants" },
                    { q: "We would like to inform you that we are at present in a ______ to supply you with...", a: "position" },
                    { q: "Please accept our regret for having to ______ your request.", a: "decline" },
                    { q: "We are interested in these articles; please let us have all the necessary ______.", a: "information" },
                    { q: "We hope you will do your best to ______ friendship as well as business.", a: "promote" },
                    { q: "A customer of ours is in the ______ for Chinese Black Tea.", a: "market" },
                    { q: "We have come to know the name of your corporation and have the ______ of writing this letter to you.", a: "pleasure" }
                ]
            },
            {
                section: "Section F",
                words: ["requirement", "bring down", "acknowledge", "grant", "bid", "open", "in duplicate", "cover", "withdraw", "effect", "utmost", "conclude"],
                questions: [
                    { q: "We request you to ______ acceptance of our order.", a: "acknowledge" },
                    { q: "As long as you put forward this request, we can ______ the Risk of Breakage for you.", a: "cover" },
                    { q: "Their company could do nothing to ______ prices.", a: "bring down" },
                    { q: "Please do your ______ to settle the claim at the least loss.", a: "utmost" },
                    { q: "Will you ______ this technical license to us?", a: "grant" },
                    { q: "Enclosed is our contract No.345 ______, of which please return us one copy.", a: "in duplicate" },
                    { q: "We always make offer as low as possible so as to ______ more business.", a: "conclude" },
                    { q: "My purpose of coming here is to ask you to ______ a letter of credit for my company.", a: "open" },
                    { q: "After rethinking, we have decided to ______ our claim.", a: "withdraw" },
                    { q: "We always try our best to meet your ______ in view of our long relation.", a: "requirement" }
                ]
            }
        ];

        const translationData = [
            { q: "很高兴收到你关于商务信件格式资料的请求。", a: "I was happy to receive your request for information about business letter formats." },
            { q: "良好的沟通能力是商界成功人士的关键所在。", a: "The ability to communicate well is a key attribute of the successful business executive." },
            { q: "如果贵方能与我方合作，我们将十分感谢。", a: "It will be greatly appreciated if you will give us your cooperation." },
            { q: "你将发现，我公司对贵方的报价所给予的优惠是前所未有的。", a: "You will find that we have given you the best terms unprecedented in our business." },
            { q: "如果你方认为这一报盘可以接受，即发E-mail给我们，以便我方确认。", a: "If you find the offer acceptable, please E-mail us immediately for our confirmation." },
            { q: "我方已另封寄给你方样品及3本商品小册子，请查收。", a: "Under separate cover, we have already sent you our samples and 3 brochures." },
            { q: "请在你地区尽力推销这种产品。", a: "Kindly do your best to promote the new product in your area." },
            { q: "按照你方要求，我们把样品另行邮寄你处。", a: "As requested, we are sending you the samples under separate cover." },
            { q: "我们的手提电脑系轻质合金制造，故携带方便，经久耐用。", a: "Our laptop is made of light alloy, being convenient in carrying and durable in use." },
            { q: "我喜欢这种款式而不是那种款式。", a: "I prefer this style to that one." },
            { q: "试销订货会使你们相信我们产品的优质。", a: "A trial order would convince you of the excellent quality of our products." },
            { q: "我们公司专营化工品进口业务。", a: "We specialize in the import of chemicals." },
            { q: "若质量达到我们的期望，我们将在最近向贵方下新订单。", a: "If the quality is up to our expectations we shall send further orders in the near future." },
            { q: "我们希望贵公司能够接受买方设计和尺寸的订单。", a: "We hoped that you can accept the order in the buyer's design and measurement." }
        ];

        const errorData = [
            { id: 1, fullSentence: "Your firm has been passed (A) on to us by Maple Company and we wish to inform you our desire (B) to import (C) some of the commodities you handle (D).", errorPart: "inform you our desire", errorLabel: "B", correction: "inform you of our desire", explanation: "inform 是动词，固定搭配为 inform sb of sth（通知某人某事），后面不能直接跟双宾语。" },
            { id: 2, fullSentence: "We take the liberty (A) of writing to you with a view to (B) build up (C) business relations with your firm (D).", errorPart: "build up", errorLabel: "C", correction: "building up", explanation: "with a view to（目的是/为了）中的 to 是介词，后面必须接动名词（v-ing）形式。" },
            { id: 3, fullSentence: "We are willing (A) to enter (B) business relations with your firm (C) on the basis of (D) equality and mutual benefit.", errorPart: "enter", errorLabel: "B", correction: "enter into", explanation: "enter into 是固定短语，意为“建立（关系）、缔结（条约）”；enter 单独使用通常表示进入物理空间。" },
            { id: 4, fullSentence: "Our goods that (A) we offer you are more in favour (B) on the Continent and there is also (C) a growing demand for them (D) in the Far East.", errorPart: "more in favour", errorLabel: "B", correction: "much in favour", explanation: "in favour 是介词短语，表示“受欢迎”。修饰介词短语表示程度深时，应该用 much 而不是 more（more 通常用于形容词比较级）。" },
            { id: 5, fullSentence: "If any (A) of the item listed (B) in the catalogue meets (C) your interest, please let us have (D) your specific enquiry...", errorPart: "item", errorLabel: "A", correction: "items", explanation: "any of 后面接可数名词时，名词应为复数形式（any of the items）。" },
            { id: 6, fullSentence: "Your company has (A) kindly recommended (B) to us by (C) Shanghai Chamber of Commerce in establishing (D) business relations with you.", errorPart: "has", errorLabel: "A", correction: "has been kindly recommended", explanation: "主语 Your company 与动词 recommend 之间是被动关系（被推荐），因此需要用被动语态 has been recommended。" },
            { id: 7, fullSentence: "We are interested (A) in the tiles you advanced (B) in building materials. Therefore, it will be a great help (C) to us if you could send us further informations (D).", errorPart: "informations", errorLabel: "D", correction: "information", explanation: "information 是不可数名词，没有复数形式，不能加 s。" },
            { id: 8, fullSentence: "We write to introduce (A) ourselves as one of the lead (B) importers of a wide range (C) of washing machines and refrigerators (D).", errorPart: "lead", errorLabel: "B", correction: "leading", explanation: "lead 是动词“领导”，leading 是形容词“主要的、领先的”，此处需要形容词修饰 importers。" },
            { id: 9, fullSentence: "We have been (A) in business as importers of general (B) merchandise since 1965 and can particularly boast of having vast and wide experience or (C) the business line of bamboo products (D).", errorPart: "or", errorLabel: "C", correction: "in", explanation: "experience in 是固定搭配，表示“在...方面的经验”，此处介词误用为 or。" },
            { id: 10, fullSentence: "You will find (A) that it possesses many unique feature (B) which definitely place it ahead of (C) its many competitors (D).", errorPart: "unique feature", errorLabel: "B", correction: "unique features", explanation: "many 后面必须接可数名词的复数形式，所以 feature 应改为 features。" },
            { id: 11, fullSentence: "In order to acquaint us (A) for (B) the material and workmanship of your products, we shall be pleased if you could send us (C) your catalogues, sample books and all necessary information (D).", errorPart: "for", errorLabel: "B", correction: "with", explanation: "acquaint sb with sth 是固定搭配，意为“使某人熟悉/了解某事”。" },
            { id: 12, fullSentence: "In the meantime (A), we would like you to send us samples (B) of the various materials which (C) the dresses are made (D).", errorPart: "which", errorLabel: "C", correction: "of which", explanation: "be made of 是固定搭配。定语从句中，介词 of 提前，构成 of which the dresses are made。" },
            { id: 13, fullSentence: "We are interested in the mechanical toys (A) demonstrate (B) at the recent Guangzhou Trade Fair and should be glad (C) to have details of your export terms (D).", errorPart: "demonstrate", errorLabel: "B", correction: "demonstrated", explanation: "toys 与 demonstrate 之间是被动关系（被展示），应使用过去分词 demonstrated 作后置定语。" },
            { id: 14, fullSentence: "We thank you (A) for your enquiry of 13 October and are pleased to send you our latest classified catalogue (B) and price list for children's clothes that we can supply (C) in stock (D).", errorPart: "in stock", errorLabel: "D", correction: "from", explanation: "supply from stock 是固定商务用语，意为“现货供应/从库存供应”。" },
            { id: 15, fullSentence: "Our company is (A) a subsidiary of Union Garments and we specialize (B) on (C) the import and export of garments (D).", errorPart: "on", errorLabel: "C", correction: "specialize in", explanation: "specialize in 是固定搭配，意为“专门从事/专营”，介词误用为 on。" },
            { id: 16, fullSentence: "Please let us know (A) what quantities you are able to deliver in regular intervals (B), quoting (C) your best price f.o.b. Shanghai (D).", errorPart: "in regular intervals", errorLabel: "B", correction: "at regular intervals", explanation: "at regular intervals 是固定搭配，意为“每隔一定时间/定期地”。" },
            { id: 17, fullSentence: "We are glad to tell you (A) that the caps as (B) enquiring for (C) in your letter of May 2nd can be supplied at (D) $80 a dozen.", errorPart: "as", errorLabel: "B", correction: "as enquired for", explanation: "caps 与 enquire 之间是被动关系，且此处为省略结构（as were enquired for），应使用过去分词 enquired。" },
            { id: 18, fullSentence: "Your name was given (A) to us by 'China's Foreign Trade Corporations and Organizations', of which (B) we have been doing business (C) for many years (D).", errorPart: "of which", errorLabel: "B", correction: "with which", explanation: "do business with sb 是固定搭配，介词 with 提前，应为 with which。" },
            { id: 19, fullSentence: "We are enclosing (A) an inquiry note No.248 and looking forward to (B) receive (C) your quotation CFR Chicago inclusive of our commission of 5% at an early date (D).", errorPart: "receive", errorLabel: "C", correction: "to receiving", explanation: "look forward to 中的 to 是介词，后面必须接动名词（v-ing）形式。" },
            { id: 20, fullSentence: "Also to (A) separate post (B) we are sending you some samples and feel confident (C) that when you have examined them you will agree that the goods are both excellent in quality and reasonable in price (D).", errorPart: "to", errorLabel: "A", correction: "by separate post", explanation: "by separate post 是商务函电固定短语，意为“另封邮寄”。" },
            { id: 21, fullSentence: "In compliance with (A) your request, we now quote you (B) subject for (C) our confirmation for the following (D).", errorPart: "subject for", errorLabel: "C", correction: "subject to", explanation: "subject to 是固定搭配，意为“以...为准/取决于...”。" },
            { id: 22, fullSentence: "If you need (A) any further information, please contact with (B) us, and we are ready (C) to answer any (D) of your questions.", errorPart: "contact with", errorLabel: "B", correction: "contact", explanation: "contact 是及物动词，直接接宾语，不需要加介词 with。" },
            { id: 23, fullSentence: "Before we can accept (A) your order, we require for (B) a down payment of 5% of (C) the total price (D).", errorPart: "require for", errorLabel: "B", correction: "require", explanation: "require 是及物动词，意为“要求/需要”，直接接宾语，不需要加 for。" },
            { id: 24, fullSentence: "We would suggest (A) in your interest (B) that you place the order (C) with us not delay (D).", errorPart: "not delay", errorLabel: "D", correction: "without", explanation: "without delay 是固定短语，意为“立即/毫不延迟”。not delay 不符合语法结构。" },
            { id: 25, fullSentence: "We have sent (A) you a price list, together along (B) detailed specifications (C) and packing (D).", errorPart: "together along", errorLabel: "B", correction: "together with", explanation: "together with 是固定搭配，意为“连同...一起”。" },
            { id: 26, fullSentence: "We thank you for your inquiry of (A) leather jackets, which we offer you as below (B), and hope to be favored (C) with your order (D).", errorPart: "offer you as below", errorLabel: "B", correction: "for which", explanation: "offer sb sth 是双宾语结构，此处是定语从句，先行词 jackets，句子结构应为 we offer you for (the jackets)，介词提前为 for which we offer you..." },
            { id: 27, fullSentence: "Our offer (A) is firm, subject to (B) your acceptance reach (C) here by the end of (D) this month.", errorPart: "reach", errorLabel: "C", correction: "reaching", explanation: "subject to 是介词短语，后面接名词或动名词。这里 acceptance 是逻辑主语，动作 reach 应变为动名词 reaching。" },
            { id: 28, fullSentence: "It's obvious (A) that such (B) a grow (C) demand will result in a price increase (D).", errorPart: "grow", errorLabel: "C", correction: "growing demand", explanation: "grow 是动词，修饰名词 demand 应该用形容词形式 growing（增长的）。" },
            { id: 29, fullSentence: "We hope (A) these prices will be satisfactory to (B) you, and we await for (C) the favor of your order, which shall have our immediate attention (D).", errorPart: "await for", errorLabel: "C", correction: "await", explanation: "await 是及物动词，意为“等候”，相当于 wait for，后面不能再加 for。" },
            { id: 30, fullSentence: "We feel (A) that your offer is not proper (B) because the price for such material is in the decline (C) at present (D).", errorPart: "in the decline", errorLabel: "C", correction: "on", explanation: "on the decline 是固定短语，意为“在下降/在衰退中”。" },
            { id: 31, fullSentence: "According with (A) this letter, it is clear (B) that its writer is eager (C) to know the results of the enquiry he made into the commodity on the catalogue (D).", errorPart: "According with", errorLabel: "A", correction: "to", explanation: "According to 是固定搭配，意为“根据/按照”。" },
            { id: 32, fullSentence: "They are not only (A) as low-priced (B) like (C) the goods of other makers, but they are distinctly (D) superior.", errorPart: "like", errorLabel: "C", correction: "as", explanation: "as...as 是同级比较结构，表示“和...一样”，固定搭配。" },
            { id: 33, fullSentence: "We would be glad (A) to have the opportunity of supplying (B) any of these goods which would be most (C) suited for (D) your needs.", errorPart: "these", errorLabel: "B", correction: "those", explanation: "those 指代上文提到的同类事物（goods），these 指代不明或不符合语境，通常用 those goods。" },
            { id: 34, fullSentence: "Since the article (A) you require is not available (B) for supply at present, we should like to recommend (C) some similar one (D) as follows.", errorPart: "similar one", errorLabel: "D", correction: "ones", explanation: "some 后面接可数名词复数，所以 one 应改为 ones。" },
            { id: 35, fullSentence: "We are sending (A) you a sample book with a price list of our new products, the high quality of that (B), we trust, will induce (C) you to place a trial order (D) with us.", errorPart: "of that", errorLabel: "B", correction: "which", explanation: "非限制性定语从句中，介词后指代物只能用 which，不能用 that。" },
            { id: 36, fullSentence: "By virtue of (A) its superior quality, this item has met with (B) a warm reception in most European countries. We deem it (C) as your advantage (D) to buy this item for a trial sale...", errorPart: "as your advantage", errorLabel: "C", correction: "to", explanation: "to your advantage 是固定搭配，意为“对你有利”。" },
            { id: 37, fullSentence: "A fair comparison (A) in quality between our products and that of (B) other suppliers will convince (C) you of the reasonableness (D) of your quotation.", errorPart: "that of", errorLabel: "B", correction: "those", explanation: "products 是复数，比较对象也应是复数，故代词用 those 指代 products。" },
            { id: 38, fullSentence: "To meet (A) the growing needs of the fast developing (B) market at your end, we are considering (C) establish (D) a representative office in your city.", errorPart: "establish", errorLabel: "D", correction: "establishing", explanation: "consider doing sth 是固定搭配，意为“考虑做某事”。" },
            { id: 39, fullSentence: "With a view to (A) support (B) our sales, we have specially (C) prepared some samples of our new makes and are sending them to you, under separate cover (D), for your consideration.", errorPart: "support", errorLabel: "A", correction: "supporting", explanation: "with a view to（为了）中的 to 是介词，后接动名词 supporting。" },
            { id: 40, fullSentence: "It is not (A) our intention to rush (B) you into a decision, but as this article is in great demand, we would advise you to avail yourselves (C) for (D) our offer in your own interest.", errorPart: "for", errorLabel: "D", correction: "of", explanation: "avail oneself of 是固定短语，意为“利用（机会等）”。" },
            { id: 41, fullSentence: "We are enclosing (A) our Purchase Confirmation No.200469 on duplicate (B) for your signature (C).", errorPart: "on duplicate", errorLabel: "B", correction: "in duplicate", explanation: "in duplicate 是固定商务短语，意为“一式两份”。" },
            { id: 42, fullSentence: "We are making (A) you the following offer subject to (B) your acceptance reaching us not later for (C) April 20.", errorPart: "not later for", errorLabel: "C", correction: "not later than", explanation: "not later than 是固定短语，意为“不迟于”。" },
            { id: 43, fullSentence: "Today I've sent (A) you a catalogue in which (B) you will see our range in (C) sanitary wares (D).", errorPart: "range in", errorLabel: "C", correction: "of", explanation: "a range of 是固定搭配，意为“一系列/各种”。" },
            { id: 44, fullSentence: "Toto bathroom equipment has (A) an unrivalled reputation for high quality (B) and design for (C) very keen prices (D).", errorPart: "for very keen prices", errorLabel: "C", correction: "at very keen prices", explanation: "at a price 是固定搭配，表示“以...的价格”。" },
            { id: 45, fullSentence: "We feel (A) you may be interested in some of our other products and enclose (B) a descriptive booklet m (C) your reference (D).", errorPart: "m", errorLabel: "C", correction: "for your reference", explanation: "for your reference 是固定短语，意为“供你参考”。" },
            { id: 46, fullSentence: "As no direct (A) steamer is available from over here (B) to London, the goods will have to (C) be transshipped in transit (D).", errorPart: "over here", errorLabel: "B", correction: "here", explanation: "from here to... 从这里到...，over here 通常指“在这边”，但在 from...to 结构中直接用 here。" },
            { id: 47, fullSentence: "The prices are exclusive with (A) the sales tax but include (B) delivery to your warehouse (C) and are valid (D) for a month from the date of this letter.", errorPart: "exclusive with", errorLabel: "A", correction: "are exclusive of", explanation: "exclusive of 是固定搭配，意为“不包括.../除去...”。" },
            { id: 48, fullSentence: "We are enclosing (A) herewith one copy of our Order No.6876 placing (B) an order with you for your electronic products with the value totaled (C) 120,000 pounds (D).", errorPart: "value totaled", errorLabel: "C", correction: "with the value totaling", explanation: "with the value totaling... 是独立主格结构或伴随状语，表示“总价值为...”，totaling 主动形式修饰 value。" },
            { id: 49, fullSentence: "As we are in urgent (A) need of these products, please make shipment (B) of the good (C) immediately (D).", errorPart: "good", errorLabel: "C", correction: "the goods", explanation: "goods（货物）必须用复数形式。" },
            { id: 50, fullSentence: "Thank you for your Order No.1 for (A) pillowcases and assure (B) you that all the items you required are at stock (C).", errorPart: "at stock", errorLabel: "C", correction: "in stock", explanation: "in stock 是固定短语，意为“有现货/库存”。" }
        ];

        // --- COMPONENTS ---

        const Header = ({ title, subtitle }) => (
            <header className="bg-white/80 backdrop-blur-md border-b border-slate-200 sticky top-0 z-50">
                <div className="max-w-6xl mx-auto px-6 py-4 flex justify-between items-center">
                    <div className="flex items-center gap-3">
                        <div className="bg-gradient-to-r from-indigo-500 to-purple-500 text-white p-2 rounded-xl shadow-md">
                            <GraduationCap size={24} />
                        </div>
                        <div>
                            <h1 className="text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-indigo-600 to-purple-600">
                                +1教你学函电
                            </h1>
                            <p className="text-xs text-slate-500 font-medium">期末复习高分助手</p>
                        </div>
                    </div>
                </div>
            </header>
        );

        const MenuCard = ({ icon: Icon, title, desc, color, onClick }) => (
            <button 
                onClick={onClick}
                className="group relative overflow-hidden rounded-3xl bg-white p-8 text-left shadow-lg hover:shadow-xl transition-all duration-300 border border-white hover:-translate-y-1"
            >
                <div className={`absolute top-0 right-0 p-8 opacity-5 transition-transform duration-500 group-hover:scale-110 group-hover:rotate-12 ${color}`}>
                    <Icon size={140} />
                </div>
                
                <div className="relative z-10">
                    <div className={`w-14 h-14 rounded-2xl flex items-center justify-center mb-6 shadow-lg ${color} text-white transition-transform duration-300 group-hover:scale-110`}>
                        <Icon size={28} />
                    </div>
                    
                    <h3 className="text-2xl font-bold text-slate-800 mb-2">{title}</h3>
                    <p className="text-slate-500 font-medium leading-relaxed">{desc}</p>
                    
                    <div className="mt-6 flex items-center text-sm font-bold text-indigo-600 opacity-0 transform translate-y-2 transition-all duration-300 group-hover:opacity-100 group-hover:translate-y-0">
                        开始复习 <ArrowRight size={16} className="ml-1" />
                    </div>
                </div>
            </button>
        );

        const SectionHeader = ({ title, subtitle, onBack }) => (
            <div className="mb-8 animate-fade-in-up">
                <button 
                    onClick={onBack}
                    className="mb-6 flex items-center text-slate-500 hover:text-indigo-600 transition-colors font-medium text-sm group"
                >
                    <ChevronLeft size={16} className="mr-1 group-hover:-translate-x-1 transition-transform" /> 返回主页
                </button>
                <div className="text-center">
                    <h2 className="text-3xl font-extrabold text-slate-900 mb-2">{title}</h2>
                    <p className="text-slate-500 font-medium">{subtitle}</p>
                </div>
            </div>
        );

        const Button = ({ onClick, children, variant = "primary", className = "", disabled=false }) => {
            const variants = {
                primary: "bg-gradient-to-r from-indigo-600 to-purple-600 text-white shadow-lg shadow-indigo-200 hover:shadow-xl hover:scale-[1.02]",
                secondary: "bg-white text-slate-600 border border-slate-200 hover:bg-slate-50 hover:border-slate-300 shadow-sm",
                danger: "bg-red-50 text-red-600 border border-red-100 hover:bg-red-100"
            };
            
            return (
                <button 
                    onClick={onClick} 
                    disabled={disabled} 
                    className={`px-6 py-3 rounded-xl font-bold transition-all duration-200 flex items-center justify-center gap-2 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none ${variants[variant]} ${className}`}
                >
                    {children}
                </button>
            );
        };

        // --- Feature Components ---

        const MCQSection = ({ data, addToMistakes, onBack }) => {
            const [currentIndex, setCurrentIndex] = useState(0);
            const [selected, setSelected] = useState(null);
            const [showResult, setShowResult] = useState(false);
            const [score, setScore] = useState(0);
            const [shuffledQuestions, setShuffledQuestions] = useState([]);

            useEffect(() => {
                setShuffledQuestions(shuffleArray(data));
            }, [data]);

            if (shuffledQuestions.length === 0) return null;
            const question = shuffledQuestions[currentIndex];

            const handleSelect = (idx) => {
                if (showResult) return;
                setSelected(idx);
                setShowResult(true);
                if (idx === question.ans) {
                    setScore(s => s + 1);
                    setTimeout(() => {
                        if (currentIndex < shuffledQuestions.length - 1) next();
                    }, 1200);
                } else {
                    addToMistakes({ type: 'mcq', id: question.id, q: question, userAnswer: idx });
                }
            };

            const next = () => {
                if (currentIndex < shuffledQuestions.length - 1) {
                    setCurrentIndex(c => c + 1);
                    setSelected(null);
                    setShowResult(false);
                }
            };

            const prev = () => {
                if (currentIndex > 0) {
                    setCurrentIndex(c => c - 1);
                    setSelected(null);
                    setShowResult(false);
                }
            };

            return (
                <div className="max-w-3xl mx-auto px-4">
                    <SectionHeader title="Part I: 单项选择" subtitle="57道核心考题，含智能解析" onBack={onBack} />
                    
                    <div className="flex justify-between items-center mb-6 px-2">
                        <span className="text-xs font-bold uppercase tracking-wider text-slate-400">Question {currentIndex + 1} / {shuffledQuestions.length}</span>
                        <div className="flex items-center gap-2 bg-white px-4 py-1.5 rounded-full shadow-sm border border-slate-100">
                            <Star size={14} className="text-yellow-400 fill-yellow-400"/>
                            <span className="text-sm font-bold text-slate-700">{score}</span>
                        </div>
                    </div>
                    
                    <div className="bg-white rounded-3xl shadow-xl shadow-slate-200/50 border border-white p-8 mb-8 relative overflow-hidden animate-fade-in-up">
                        <div className="absolute top-0 right-0 p-6 opacity-5 pointer-events-none"><CheckCircle size={100}/></div>
                        <p className="text-xl text-slate-800 font-medium leading-relaxed mb-8 relative z-10">{question.q}</p>
                        
                        <div className="space-y-3 relative z-10">
                            {question.options.map((opt, idx) => (
                                <button
                                    key={idx}
                                    onClick={() => handleSelect(idx)}
                                    disabled={showResult}
                                    className={`w-full text-left p-4 rounded-xl border-2 transition-all duration-200 flex items-center group
                                        ${showResult 
                                            ? idx === question.ans 
                                                ? "border-green-500 bg-green-50 text-green-900"
                                                : idx === selected 
                                                    ? "border-red-500 bg-red-50 text-red-900"
                                                    : "border-slate-100 text-slate-400 opacity-60"
                                            : "border-slate-100 hover:border-indigo-200 hover:bg-slate-50 text-slate-600"
                                        }
                                    `}
                                >
                                    <span className={`w-8 h-8 flex flex-shrink-0 items-center justify-center rounded-lg mr-4 text-sm font-bold transition-colors
                                        ${showResult
                                            ? idx === question.ans ? "bg-green-200 text-green-800" : idx === selected ? "bg-red-200 text-red-800" : "bg-slate-200 text-slate-500"
                                            : "bg-slate-100 text-slate-500 group-hover:bg-white group-hover:text-indigo-600 group-hover:shadow-sm"
                                        }
                                    `}>
                                        {String.fromCharCode(65 + idx)}
                                    </span>
                                    <span className="font-medium">{opt}</span>
                                    {showResult && idx === question.ans && <CheckCircle className="ml-auto text-green-600" size={20}/>}
                                    {showResult && idx === selected && idx !== question.ans && <XCircle className="ml-auto text-red-600" size={20}/>}
                                </button>
                            ))}
                        </div>

                        {showResult && (
                            <div className="mt-8 p-5 bg-indigo-50/50 rounded-2xl border border-indigo-100 animate-fade-in-up">
                                <div className="flex gap-3">
                                    <div className="bg-indigo-100 p-2 rounded-lg h-fit text-indigo-600"><HelpCircle size={20} /></div>
                                    <div>
                                        <h4 className="font-bold text-indigo-900 text-sm mb-1">名师解析</h4>
                                        <p className="text-slate-600 text-sm leading-relaxed">{question.explanation}</p>
                                    </div>
                                </div>
                            </div>
                        )}
                    </div>

                    <div className="flex justify-between items-center pb-12">
                        <Button variant="secondary" onClick={prev} disabled={currentIndex === 0}><ChevronLeft size={18}/> 上一题</Button>
                        <Button onClick={next} disabled={!showResult || currentIndex === shuffledQuestions.length - 1}>下一题 <ChevronRight size={18}/></Button>
                    </div>
                </div>
            );
        };

        const FillBlanksSection = ({ data, onBack }) => {
            const [sectionIndex, setSectionIndex] = useState(0);
            const currentSection = data[sectionIndex];
            const [selectedWord, setSelectedWord] = useState(null);
            const [userAnswers, setUserAnswers] = useState({});
            const [isChecked, setIsChecked] = useState(false);

            useEffect(() => { setUserAnswers({}); setIsChecked(false); setSelectedWord(null); }, [sectionIndex]);

            const handleWordBankClick = (word) => {
                if (isChecked || Object.values(userAnswers).includes(word)) return;
                setSelectedWord(word === selectedWord ? null : word);
            };

            const handleBlankClick = (idx) => {
                if (isChecked) return;
                if (selectedWord) {
                    setUserAnswers(prev => ({ ...prev, [idx]: selectedWord }));
                    setSelectedWord(null);
                } else if (userAnswers[idx]) {
                    setUserAnswers(prev => { const n = { ...prev }; delete n[idx]; return n; });
                }
            };

            return (
                <div className="max-w-5xl mx-auto px-4">
                    <SectionHeader title="Part II: 选词填空" subtitle="六大Section，交互式填词体验" onBack={onBack} />
                    
                    <div className="flex justify-center mb-8">
                        <div className="flex gap-2 bg-white p-2 rounded-2xl shadow-sm border border-slate-100 overflow-x-auto no-scrollbar">
                            {data.map((sec, idx) => (
                                <button 
                                    key={idx} 
                                    onClick={() => setSectionIndex(idx)}
                                    className={`px-6 py-2.5 rounded-xl text-sm font-bold whitespace-nowrap transition-all ${sectionIndex === idx ? 'bg-indigo-600 text-white shadow-md' : 'text-slate-500 hover:bg-slate-50'}`}
                                >
                                    {sec.section}
                                </button>
                            ))}
                        </div>
                    </div>

                    <div className="grid grid-cols-1 lg:grid-cols-12 gap-8 items-start pb-12">
                        <div className="lg:col-span-4 lg:sticky lg:top-28">
                            <div className="bg-white rounded-3xl shadow-xl shadow-slate-200/50 border border-white p-6">
                                <h3 className="text-xs font-bold text-slate-400 uppercase tracking-widest mb-4 flex items-center gap-2"><MousePointerClick size={14}/> 词库 Word Bank</h3>
                                <div className="flex flex-wrap gap-2 mb-6">
                                    {currentSection.words.map((w, i) => {
                                        const isUsed = Object.values(userAnswers).includes(w);
                                        const isSelected = selectedWord === w;
                                        return (
                                            <button key={i} disabled={isUsed || isChecked} onClick={() => handleWordBankClick(w)} className={`px-3 py-2 rounded-lg text-sm font-medium transition-all text-left border ${isUsed ? 'bg-slate-50 text-slate-300 border-transparent cursor-not-allowed decoration-slate-300 line-through' : isSelected ? 'bg-indigo-600 text-white border-indigo-600 shadow-md transform scale-105' : 'bg-slate-50 text-slate-600 border-slate-100 hover:border-indigo-300 hover:text-indigo-600'}`}>{w}</button>
                                        );
                                    })}
                                </div>
                                <div className="space-y-3">
                                    {!isChecked ? (
                                        <Button onClick={() => { setIsChecked(true); setSelectedWord(null); }} disabled={Object.keys(userAnswers).length === 0} className="w-full"><Check size={18}/> 提交检查</Button>
                                    ) : (
                                        <Button onClick={() => { setUserAnswers({}); setIsChecked(false); }} variant="secondary" className="w-full"><RefreshCw size={18}/> 重置本节</Button>
                                    )}
                                </div>
                            </div>
                        </div>

                        <div className="lg:col-span-8 space-y-4">
                            {currentSection.questions.map((item, idx) => {
                                const ans = userAnswers[idx];
                                const isCorrect = ans === item.a;
                                const parts = item.q.split('______');
                                return (
                                    <div key={idx} className="bg-white p-6 rounded-2xl border border-slate-100 shadow-sm leading-8 text-lg hover:border-indigo-100 transition-colors animate-fade-in-up" style={{animationDelay: `${idx * 50}ms`}}>
                                        <span className="font-bold text-slate-300 mr-4 select-none">{idx + 1}</span>
                                        {parts[0]}
                                        <span onClick={() => handleBlankClick(idx)} className={`inline-flex items-center justify-center min-w-[120px] px-3 py-1 mx-2 border-b-2 text-center cursor-pointer font-bold transition-all select-none rounded-t-md ${isChecked ? (isCorrect ? "border-green-500 text-green-700 bg-green-50" : "border-red-500 text-red-700 bg-red-50") : (ans ? "border-indigo-500 text-indigo-700 bg-indigo-50" : selectedWord ? "border-indigo-300 bg-yellow-50 animate-pulse shadow-[0_0_10px_rgba(250,204,21,0.3)]" : "border-slate-300 bg-slate-50 hover:bg-slate-100 text-transparent")}`}>
                                            {ans || (isChecked ? "___" : "点击填入")}
                                        </span>
                                        {parts[1]}
                                        {isChecked && !isCorrect && <div className="mt-3 text-sm flex items-center gap-2 text-green-700 bg-green-50 px-3 py-1.5 rounded-lg w-fit"><CheckCircle size={14}/> 正确答案: <strong>{item.a}</strong></div>}
                                    </div>
                                );
                            })}
                        </div>
                    </div>
                </div>
            );
        };

        const TranslationSection = ({ data, addToMistakes, onBack }) => {
            const [index, setIndex] = useState(0);
            const [shuffledData, setShuffledData] = useState([]);
            const [mode, setSubMode] = useState('flip');
            const [flipped, setFlipped] = useState(false);
            const [availableWords, setAvailableWords] = useState([]);
            const [userSentence, setUserSentence] = useState([]);
            const [assembleStatus, setAssembleStatus] = useState('idle');

            useEffect(() => { setShuffledData(shuffleArray(data)); }, [data]);

            useEffect(() => {
                if (mode === 'assemble' && shuffledData.length > 0) {
                    const current = shuffledData[index];
                    const words = current.a.split(' ').map((w, i) => ({ id: i, text: w.trim() }));
                    setAvailableWords(shuffleArray(words));
                    setUserSentence([]);
                    setAssembleStatus('idle');
                }
            }, [mode, index, shuffledData]);

            if (shuffledData.length === 0) return null;
            const current = shuffledData[index];

            const next = () => {
                setFlipped(false);
                setAssembleStatus('idle');
                setTimeout(() => setIndex(i => (i + 1) % shuffledData.length), 300);
            };

            const prev = () => {
                setFlipped(false);
                setAssembleStatus('idle');
                setTimeout(() => {
                    if (index > 0) setIndex(i => i - 1);
                    else setIndex(shuffledData.length - 1);
                }, 300);
            };

            const selectWord = (wordObj) => {
                if (assembleStatus === 'correct') return;
                setAvailableWords(prev => prev.filter(w => w.id !== wordObj.id));
                setUserSentence(prev => [...prev, wordObj]);
                setAssembleStatus('idle');
            };

            const removeWord = (wordObj) => {
                if (assembleStatus === 'correct') return;
                setUserSentence(prev => prev.filter(w => w.id !== wordObj.id));
                setAvailableWords(prev => [...prev, wordObj]);
                setAssembleStatus('idle');
            };

            const checkAssembly = () => {
                const userString = userSentence.map(w => w.text).join(' ');
                if (userString === current.a || userString + '.' === current.a || userString === current.a + '.') setAssembleStatus('correct');
                else setAssembleStatus('wrong');
            };

            const resetAssembly = () => {
                const words = current.a.split(' ').map((w, i) => ({ id: i, text: w.trim() }));
                setAvailableWords(shuffleArray(words));
                setUserSentence([]);
                setAssembleStatus('idle');
            };

            return (
                <div className="max-w-3xl mx-auto px-4 min-h-[80vh] flex flex-col">
                    <SectionHeader title="Part III: 汉译英" subtitle="14道精选真题，双模式记忆" onBack={onBack} />
                    
                    <div className="flex justify-between items-center mb-6 px-2">
                        <span className="text-xs font-bold uppercase tracking-wider text-slate-400">Card {index + 1} / {shuffledData.length}</span>
                        <div className="bg-slate-100 p-1 rounded-lg flex gap-1">
                            <button onClick={() => setSubMode('flip')} className={`px-4 py-1.5 rounded-md text-xs font-bold transition-all ${mode === 'flip' ? 'bg-white text-indigo-600 shadow-sm' : 'text-slate-500 hover:text-slate-700'}`}>翻卡模式</button>
                            <button onClick={() => setSubMode('assemble')} className={`px-4 py-1.5 rounded-md text-xs font-bold transition-all ${mode === 'assemble' ? 'bg-white text-indigo-600 shadow-sm' : 'text-slate-500 hover:text-slate-700'}`}>拼句模式</button>
                        </div>
                    </div>
                    
                    {mode === 'flip' ? (
                        <div onClick={() => setFlipped(!flipped)} className="cursor-pointer relative w-full aspect-[16/9] transition-all duration-700 transform-style-3d group">
                            <div className={`absolute inset-0 bg-white p-8 md:p-12 rounded-3xl shadow-xl shadow-slate-200/50 border border-white flex flex-col items-center justify-center text-center backface-hidden transition-all ${flipped ? 'opacity-0 pointer-events-none' : 'opacity-100'}`}>
                                <div className="w-12 h-12 bg-indigo-50 text-indigo-600 rounded-full flex items-center justify-center mb-6 font-bold text-lg">中</div>
                                <h3 className="text-2xl md:text-3xl font-bold text-slate-800 leading-normal">{current.q}</h3>
                                <p className="absolute bottom-8 text-slate-400 text-sm font-medium flex items-center gap-2 bg-slate-50 px-4 py-2 rounded-full"><MousePointerClick size={14}/> 点击翻看英文</p>
                            </div>
                            <div className={`absolute inset-0 bg-gradient-to-br from-indigo-600 to-purple-600 p-8 md:p-12 rounded-3xl shadow-xl flex flex-col items-center justify-center text-center backface-hidden text-white ${flipped ? 'opacity-100' : 'opacity-0 pointer-events-none'}`} style={{ transform: 'rotateY(180deg)' }}>
                                <div className="w-12 h-12 bg-white/20 backdrop-blur-md rounded-full flex items-center justify-center mb-6 font-bold text-lg">En</div>
                                <h3 className="text-xl md:text-2xl font-medium leading-relaxed">{current.a}</h3>
                            </div>
                        </div>
                    ) : (
                        <div className="bg-white rounded-3xl shadow-xl shadow-slate-200/50 border border-white p-8 flex flex-col min-h-[450px]">
                            <h3 className="text-xl font-bold text-slate-800 mb-6 text-center">{current.q}</h3>
                            <div className={`flex-grow border-2 rounded-2xl p-6 mb-6 flex flex-wrap gap-2 content-start transition-colors min-h-[120px] ${assembleStatus === 'correct' ? 'border-green-400 bg-green-50' : assembleStatus === 'wrong' ? 'border-red-300 bg-red-50' : 'border-slate-100 bg-slate-50'}`}>
                                {userSentence.length === 0 && <span className="text-slate-400 text-sm select-none w-full text-center mt-8">点击下方单词组成句子...</span>}
                                {userSentence.map((w) => (
                                    <button key={w.id} onClick={() => removeWord(w)} className="bg-white border border-indigo-100 text-indigo-700 px-3 py-1.5 rounded-lg shadow-sm hover:text-red-500 transition-all font-medium text-sm animate-fade-in">{w.text}</button>
                                ))}
                            </div>
                            {assembleStatus !== 'idle' && (
                                <div className={`text-center mb-6 p-4 rounded-xl ${assembleStatus === 'correct' ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'} animate-fade-in-up`}>
                                    <p className="font-bold text-lg mb-1">{assembleStatus === 'correct' ? "🎉 回答正确！Excellent!" : "❌ 顺序不对"}</p>
                                    {assembleStatus === 'wrong' && <p className="text-sm mt-1">正确答案：<span className="font-bold select-all">{current.a}</span></p>}
                                </div>
                            )}
                            <div className="flex flex-wrap gap-2 justify-center mb-8">
                                {availableWords.map((w) => (
                                    <button key={w.id} onClick={() => selectWord(w)} className="bg-white border border-slate-200 text-slate-600 px-3 py-1.5 rounded-lg shadow-sm hover:border-indigo-400 hover:text-indigo-600 transition-all text-sm">{w.text}</button>
                                ))}
                            </div>
                            <div className="flex justify-center gap-4 mt-auto">
                                <Button onClick={checkAssembly} disabled={userSentence.length === 0 || assembleStatus === 'correct'}>检查 Check</Button>
                                <Button variant="secondary" onClick={resetAssembly}><RefreshCw size={16}/> 重置</Button>
                            </div>
                        </div>
                    )}

                    <div className="flex justify-between mt-8 items-center px-2 pb-12">
                        <Button variant="secondary" onClick={prev}><ChevronLeft size={18}/> 上一题</Button>
                        <button onClick={() => addToMistakes({ type: 'trans', id: current.q, q: current })} className="flex items-center gap-2 bg-yellow-50 hover:bg-yellow-100 px-4 py-2 rounded-full text-yellow-600 text-sm font-bold transition-colors">
                            <Bookmark size={14} className="fill-current"/> 加入错题本
                        </button>
                        <Button onClick={next}>下一题 <ChevronRight size={18}/></Button>
                    </div>
                </div>
            );
        };

        const ErrorCorrectionSection = ({ data, addToMistakes, onBack }) => {
            const [index, setIndex] = useState(0);
            const [userInput, setUserInput] = useState("");
            const [status, setStatus] = useState("idle");
            const [shuffledQuestions, setShuffledQuestions] = useState([]);

            useEffect(() => { setShuffledQuestions(shuffleArray(data)); }, [data]);
            if (shuffledQuestions.length === 0) return null;
            const current = shuffledQuestions[index];

            const handleCheck = () => {
                const normUser = userInput.trim().toLowerCase().replace(/\s+/g, ' ');
                const normCorrect = current.correction.trim().toLowerCase().replace(/\s+/g, ' ');
                if (normUser === normCorrect || normUser.includes(normCorrect)) {
                    setStatus("correct");
                    setTimeout(() => { if (index < shuffledQuestions.length - 1) next(); }, 2000);
                } else {
                    setStatus("wrong");
                    addToMistakes({ type: 'error', id: current.id, q: current, userAnswer: userInput });
                }
            };

            const next = () => { if (index < shuffledQuestions.length - 1) { setIndex(i => i + 1); setUserInput(""); setStatus("idle"); } };
            const prev = () => { if (index > 0) { setIndex(i => i - 1); setUserInput(""); setStatus("idle"); } };

            return (
                <div className="max-w-3xl mx-auto px-4">
                    <SectionHeader title="Part IV: 改错题" subtitle="模拟真实考试，含详细解析" onBack={onBack} />
                    <div className="flex justify-between items-center mb-6 px-2">
                        <span className="text-xs font-bold uppercase tracking-wider text-slate-400">Question {index + 1} / {shuffledQuestions.length}</span>
                    </div>
                    
                    <div className="bg-white rounded-3xl shadow-xl shadow-slate-200/50 border border-white p-8 mb-8">
                        <div className="text-xl text-slate-800 mb-8 font-serif leading-relaxed">
                            {current.fullSentence.split('(').map((part, i) => {
                                if (i === 0) return <span key={i}>{part}</span>;
                                return <span key={i}><span className="font-bold text-indigo-600 mx-1 bg-indigo-50 px-1 rounded">({part.charAt(0)})</span>{part.substring(1)}</span>;
                            })}
                        </div>

                        <div className="bg-orange-50 p-4 rounded-xl border border-orange-100 mb-8 flex gap-3 items-start">
                            <AlertCircle size={20} className="text-orange-600 flex-shrink-0 mt-0.5"/>
                            <div>
                                <p className="text-orange-900 font-bold text-sm">任务：</p>
                                <p className="text-orange-800/80 text-sm">错误点在选项 <strong>({current.errorLabel})</strong>: "{current.errorPart}"，请在下方输入修正后的表达。</p>
                            </div>
                        </div>

                        <div className="space-y-4">
                            <div className="flex gap-3">
                                <input 
                                    type="text" 
                                    value={userInput}
                                    onChange={(e) => setUserInput(e.target.value)}
                                    placeholder="在此输入正确的表达..."
                                    disabled={status === "correct"}
                                    className={`flex-grow p-4 text-lg border-2 rounded-xl outline-none transition-all ${status === 'correct' ? 'border-green-500 bg-green-50 text-green-900' : status === 'wrong' ? 'border-red-500 bg-red-50 text-red-900' : 'border-slate-100 focus:border-indigo-500 focus:shadow-lg'}`}
                                    onKeyDown={(e) => e.key === 'Enter' && status !== 'correct' && handleCheck()}
                                />
                                {status !== "correct" && <Button onClick={handleCheck} disabled={!userInput.trim()}>检查</Button>}
                            </div>
                        </div>

                        {status !== "idle" && (
                            <div className={`mt-6 p-5 rounded-2xl border flex flex-col gap-4 animate-fade-in-up ${status === 'correct' ? 'bg-green-50 border-green-200' : 'bg-red-50 border-red-200'}`}>
                                <div className="flex items-center gap-3">
                                    {status === 'correct' ? <CheckCircle className="text-green-600" size={24}/> : <XCircle className="text-red-600" size={24}/>}
                                    <p className={`font-bold text-lg ${status === 'correct' ? 'text-green-900' : 'text-red-900'}`}>{status === 'correct' ? "Great! 回答正确" : "Oops! 再试一次"}</p>
                                </div>
                                <div className="pl-9">
                                    <p className="text-slate-700 mb-2"><span className="font-bold">参考答案:</span> <span className="text-indigo-700 font-bold bg-indigo-50 px-2 py-0.5 rounded ml-1">{current.correction}</span></p>
                                    <div className="text-sm text-slate-600 bg-white/60 p-3 rounded-lg border border-black/5"><span className="font-bold text-slate-800">💡 解析：</span>{current.explanation}</div>
                                </div>
                            </div>
                        )}
                    </div>

                    <div className="flex justify-between items-center pb-12">
                        <Button variant="secondary" onClick={prev} disabled={index === 0}><ChevronLeft size={18}/> 上一题</Button>
                        <Button onClick={next} disabled={index === shuffledQuestions.length - 1}>下一题 <ChevronRight size={18}/></Button>
                    </div>
                </div>
            );
        };

        const MistakeNotebook = ({ mistakes, removeMistake, onBack }) => {
            return (
                <div className="max-w-4xl mx-auto px-4 pb-12">
                    <SectionHeader title="我的错题本" subtitle={`共收录 ${mistakes.length} 道错题，温故而知新`} onBack={onBack} />
                    
                    {mistakes.length === 0 ? (
                        <div className="text-center py-20 animate-fade-in-up bg-white rounded-3xl border border-slate-100 shadow-sm">
                            <div className="bg-green-50 w-24 h-24 rounded-full flex items-center justify-center mx-auto mb-6"><CheckCircle size={48} className="text-green-500" /></div>
                            <h3 className="text-2xl font-bold text-slate-800 mb-2">太棒了！暂无错题</h3>
                            <p className="text-slate-500">做错的题目会自动出现在这里，继续加油！</p>
                        </div>
                    ) : (
                        <div className="space-y-6">
                            {mistakes.map((item, idx) => (
                                <div key={idx} className="bg-white p-8 rounded-3xl border border-slate-100 shadow-sm hover:shadow-md transition-all relative group animate-fade-in-up" style={{animationDelay: `${idx * 50}ms`}}>
                                    <button onClick={() => removeMistake(item.id, item.type)} className="absolute top-6 right-6 p-2 text-slate-300 hover:text-red-500 hover:bg-red-50 rounded-full transition-colors" title="移除此题"><Trash2 size={20}/></button>
                                    <span className={`inline-block px-3 py-1 rounded-full text-xs font-bold mb-4 ${item.type === 'mcq' ? 'bg-indigo-100 text-indigo-700' : item.type === 'trans' ? 'bg-blue-100 text-blue-700' : 'bg-orange-100 text-orange-700'}`}>
                                        {item.type === 'mcq' ? '单项选择' : item.type === 'trans' ? '汉译英' : '改错题'}
                                    </span>

                                    {item.type === 'mcq' && (
                                        <div>
                                            <p className="text-lg font-medium text-slate-800 mb-4">{item.q.q}</p>
                                            <div className="grid grid-cols-1 sm:grid-cols-2 gap-2 mb-4">
                                                {item.q.options.map((opt, i) => (
                                                    <div key={i} className={`p-3 rounded-lg border text-sm ${i === item.q.ans ? 'bg-green-50 border-green-200 text-green-800 font-bold' : 'bg-slate-50 border-slate-100 text-slate-500'}`}>{String.fromCharCode(65 + i)}. {opt}</div>
                                                ))}
                                            </div>
                                            <p className="text-sm text-slate-500 bg-slate-50 p-3 rounded-xl">💡 解析: {item.q.explanation}</p>
                                        </div>
                                    )}

                                    {item.type === 'trans' && (
                                        <div>
                                            <p className="text-lg font-bold text-slate-800 mb-3">{item.q.q}</p>
                                            <div className="bg-slate-50 p-4 rounded-xl border border-slate-100 text-slate-600 font-serif leading-relaxed">{item.q.a}</div>
                                        </div>
                                    )}

                                    {item.type === 'error' && (
                                        <div>
                                            <p className="text-lg font-medium text-slate-800 mb-3 font-serif">{item.q.fullSentence}</p>
                                            <div className="flex gap-4 text-sm mt-3 flex-wrap">
                                                <span className="text-red-600 bg-red-50 px-3 py-1 rounded-lg">错误: {item.q.errorPart} ({item.q.errorLabel})</span>
                                                <span className="text-green-600 bg-green-50 px-3 py-1 rounded-lg font-bold">正解: {item.q.correction}</span>
                                            </div>
                                            <p className="text-sm text-slate-500 mt-3 bg-slate-50 p-3 rounded-xl">💡 解析: {item.q.explanation}</p>
                                        </div>
                                    )}
                                </div>
                            ))}
                        </div>
                    )}
                </div>
            );
        };

        function App() {
            const [mode, setMode] = useState('menu');
            const [wrongAnswers, setWrongAnswers] = useState(() => {
                try {
                    const saved = localStorage.getItem('handen_mistakes');
                    return saved ? JSON.parse(saved) : [];
                } catch (e) { return []; }
            });

            useEffect(() => { localStorage.setItem('handen_mistakes', JSON.stringify(wrongAnswers)); }, [wrongAnswers]);

            const addToMistakes = (item) => {
                setWrongAnswers(prev => {
                    const exists = prev.some(i => i.id === item.id && i.type === item.type);
                    if (exists) return prev;
                    return [item, ...prev];
                });
            };

            const removeMistake = (id, type) => {
                setWrongAnswers(prev => prev.filter(i => !(i.id === id && i.type === type)));
            };

            return (
                <div className="min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 font-sans pb-20">
                    {/* Background Blobs */}
                    <div className="fixed top-0 left-0 w-full h-full overflow-hidden pointer-events-none z-0">
                        <div className="absolute top-[-10%] left-[-10%] w-96 h-96 bg-purple-200 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob"></div>
                        <div className="absolute top-[-10%] right-[-10%] w-96 h-96 bg-indigo-200 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob animation-delay-2000"></div>
                        <div className="absolute bottom-[-10%] left-[20%] w-96 h-96 bg-blue-200 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob animation-delay-4000"></div>
                    </div>

                    <div className="relative z-10">
                        {mode === 'menu' ? (
                            <React.Fragment>
                                <Header />
                                <main className="p-6 md:p-12 max-w-7xl mx-auto">
                                    {/* Hero Section */}
                                    <div className="mb-16 text-center animate-fade-in-up">
                                        <h1 className="text-4xl md:text-6xl font-extrabold text-slate-900 mb-6 tracking-tight">
                                            外贸函电 <span className="text-transparent bg-clip-text bg-gradient-to-r from-indigo-600 to-purple-600">期末高分攻略</span>
                                        </h1>
                                        <p className="text-lg text-slate-600 max-w-2xl mx-auto leading-relaxed">
                                            不仅仅是刷题。交互式学习、智能纠错、科学记忆，助你轻松掌握外贸函电核心考点。
                                        </p>
                                    </div>

                                    {/* Cards Grid */}
                                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                                        <MenuCard 
                                            icon={CheckCircle} 
                                            title="Part I: 单项选择" 
                                            desc="57道核心考题，包含智能解析与知识点巩固。"
                                            color="bg-gradient-to-br from-indigo-500 to-purple-600"
                                            onClick={() => setMode('mcq')}
                                        />
                                        <MenuCard 
                                            icon={FileText} 
                                            title="Part II: 选词填空" 
                                            desc="六大情境板块，交互式点击填词，强化语境记忆。"
                                            color="bg-gradient-to-br from-purple-500 to-pink-600"
                                            onClick={() => setMode('fill')}
                                        />
                                        <MenuCard 
                                            icon={Globe} 
                                            title="Part III: 汉译英" 
                                            desc="14道精选真题。翻转卡片背诵 + 拼句实战演练。"
                                            color="bg-gradient-to-br from-blue-500 to-cyan-500"
                                            onClick={() => setMode('trans')}
                                        />
                                        <MenuCard 
                                            icon={PenTool} 
                                            title="Part IV: 改错题" 
                                            desc="50道易错题。模拟真实考试环境，含详细错误原因解析。"
                                            color="bg-gradient-to-br from-orange-400 to-red-500"
                                            onClick={() => setMode('error')}
                                        />
                                        <MenuCard 
                                            icon={BookX} 
                                            title="我的错题本" 
                                            desc={`已收录 ${wrongAnswers.length} 道错题。重点攻克薄弱环节，温故知新。`}
                                            color="bg-gradient-to-br from-slate-600 to-slate-800"
                                            onClick={() => setMode('mistakes')}
                                        />
                                    </div>
                                </main>
                            </React.Fragment>
                        ) : (
                            <div className="pt-6">
                                {mode === 'mcq' && <MCQSection data={mcqData} addToMistakes={addToMistakes} onBack={() => setMode('menu')} />}
                                {mode === 'fill' && <FillBlanksSection data={fillBlanksData} onBack={() => setMode('menu')} />}
                                {mode === 'trans' && <TranslationSection data={translationData} addToMistakes={addToMistakes} onBack={() => setMode('menu')} />}
                                {mode === 'error' && <ErrorCorrectionSection data={errorData} addToMistakes={addToMistakes} onBack={() => setMode('menu')} />}
                                {mode === 'mistakes' && <MistakeNotebook mistakes={wrongAnswers} removeMistake={removeMistake} onBack={() => setMode('menu')} />}
                            </div>
                        )}
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
