<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>+1教你学文化 (V11 - Fixed Lookup)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        html, body { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; background-color: #f3e8ff; -webkit-tap-highlight-color: transparent; }
        #app-wrapper { position: fixed; top: 0; left: 0; right: 0; bottom: 0; display: flex; flex-direction: column; padding-bottom: env(safe-area-inset-bottom); }
        @media (min-width: 768px) { #app-wrapper { flex-direction: row; position: relative; height: 100vh; } }
        .scroll-area { overflow-y: auto; -webkit-overflow-scrolling: touch; overscroll-behavior: contain; }
        .fade-in { animation: fadeIn 0.3s ease-out forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .option-btn { transition: transform 0.1s, background-color 0.2s; }
        .option-btn:active { transform: scale(0.98); background-color: #f3f4f6; }
        .option-selected { background-color: #e9d5ff !important; border-color: #9333ea !important; color: #4c1d95 !important; font-weight: 700; }
        .shake { animation: shake 0.4s cubic-bezier(.36,.07,.19,.97) both; }
        @keyframes shake { 10%, 90% { transform: translate3d(-1px, 0, 0); } 20%, 80% { transform: translate3d(2px, 0, 0); } 30%, 50%, 70% { transform: translate3d(-4px, 0, 0); } 40%, 60% { transform: translate3d(4px, 0, 0); } }
        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #d8b4fe; border-radius: 2px; }
        .nav-active { background-color: #581c87 !important; border-left: 4px solid #d8b4fe !important; }
        .overlay { transition: opacity 0.3s ease; }
    </style>
</head>
<body>
    <div id="app-wrapper">
        <div id="mobile-overlay" onclick="toggleSidebar()" class="fixed inset-0 bg-black/50 z-40 hidden opacity-0 overlay backdrop-blur-sm"></div>
        <aside id="sidebar" class="fixed inset-y-0 left-0 w-72 bg-purple-900 text-white flex flex-col shadow-2xl z-50 transform -translate-x-full transition-transform duration-300 ease-in-out md:relative md:translate-x-0 flex-shrink-0 h-full">
            <div class="p-4 md:p-5 bg-purple-950 font-bold text-lg md:text-xl flex items-center justify-between border-b border-purple-800 flex-shrink-0">
                <div class="flex items-center gap-2"><i class="fas fa-graduation-cap text-yellow-300"></i><span>+1教你学文化</span></div>
                <button onclick="toggleSidebar()" class="md:hidden text-purple-300 p-2"><i class="fas fa-times text-xl"></i></button>
            </div>
            <div class="flex-1 overflow-y-auto p-2 space-y-1 scroll-area">
                <button onclick="switchModule('matching_basic')" class="nav-btn w-full text-left px-4 py-3 rounded-lg hover:bg-purple-800 transition flex items-center justify-between group nav-active" id="nav-matching_basic"><span class="font-medium text-sm md:text-base"><i class="fas fa-random w-5 mr-2 opacity-70"></i>核心连线 (Supp)</span><span class="text-xs bg-purple-700 px-2 py-0.5 rounded-full">5</span></button>
                <button onclick="switchModule('matching_defs')" class="nav-btn w-full text-left px-4 py-3 rounded-lg hover:bg-purple-800 transition flex items-center justify-between group" id="nav-matching_defs"><span class="font-medium text-sm md:text-base"><i class="fas fa-book-open w-5 mr-2 opacity-70"></i>名词解释 (Main)</span><span class="text-xs bg-purple-700 px-2 py-0.5 rounded-full">26</span></button>
                <button onclick="switchModule('blanks')" class="nav-btn w-full text-left px-4 py-3 rounded-lg hover:bg-purple-800 transition flex items-center justify-between group" id="nav-blanks"><span class="font-medium text-sm md:text-base"><i class="fas fa-pencil-alt w-5 mr-2 opacity-70"></i>理论填空 (Supp)</span><span class="text-xs bg-purple-700 px-2 py-0.5 rounded-full">10</span></button>
                <button onclick="switchModule('mc')" class="nav-btn w-full text-left px-4 py-3 rounded-lg hover:bg-purple-800 transition flex items-center justify-between group" id="nav-mc"><span class="font-medium text-sm md:text-base"><i class="fas fa-list-ul w-5 mr-2 opacity-70"></i>选择题 (Main)</span><span class="text-xs bg-purple-700 px-2 py-0.5 rounded-full">70</span></button>
                <button onclick="switchModule('tf_a')" class="nav-btn w-full text-left px-4 py-3 rounded-lg hover:bg-purple-800 transition flex items-center justify-between group" id="nav-tf_a"><span class="font-medium text-sm md:text-base"><i class="fas fa-check-square w-5 mr-2 opacity-70"></i>判断题 I (Supp)</span><span class="text-xs bg-purple-700 px-2 py-0.5 rounded-full">30</span></button>
                <button onclick="switchModule('tf_b')" class="nav-btn w-full text-left px-4 py-3 rounded-lg hover:bg-purple-800 transition flex items-center justify-between group" id="nav-tf_b"><span class="font-medium text-sm md:text-base"><i class="fas fa-check-circle w-5 mr-2 opacity-70"></i>判断题 II (Main)</span><span class="text-xs bg-purple-700 px-2 py-0.5 rounded-full">96</span></button>
            </div>
        </aside>
        <main class="flex-1 flex flex-col min-w-0 bg-gray-50 h-full w-full">
            <header class="bg-white shadow-sm px-4 py-3 flex justify-between items-center z-20 flex-shrink-0 border-b border-gray-100">
                <div class="flex items-center gap-3 overflow-hidden">
                    <button onclick="toggleSidebar()" class="md:hidden text-purple-700 p-1.5 -ml-2 rounded-md active:bg-purple-50"><i class="fas fa-bars text-xl"></i></button>
                    <div class="flex flex-col overflow-hidden">
                        <h2 id="module-title" class="text-base md:text-2xl font-bold text-purple-900 truncate">核心连线</h2>
                        <div class="text-xs text-gray-500">进度: <span id="progress-text" class="font-bold text-purple-600">1 / 5</span></div>
                    </div>
                </div>
                <div class="flex items-center gap-2 flex-shrink-0">
                    <label class="flex items-center bg-purple-50 px-3 py-1.5 rounded-full cursor-pointer active:bg-purple-100"><input type="checkbox" id="shuffle-toggle" class="w-4 h-4 text-purple-600 rounded" onchange="toggleShuffle()"><span class="ml-1.5 text-xs font-bold text-purple-700">随机</span></label>
                    <div class="hidden sm:flex items-center bg-white border border-gray-200 rounded-lg p-0.5"><input type="number" id="jump-input" class="w-10 text-center text-xs outline-none p-1" placeholder="#"><button onclick="jumpToQuestion()" class="bg-purple-100 text-purple-700 px-2 py-1 rounded text-xs font-bold">Go</button></div>
                </div>
            </header>
            <div class="w-full bg-gray-200 h-1 flex-shrink-0"><div id="progress-bar" class="bg-purple-500 h-1 transition-all duration-300" style="width: 0%"></div></div>
            <div id="quiz-container" class="flex-1 overflow-y-auto scroll-area p-3 md:p-8 w-full">
                <div class="w-full max-w-4xl mx-auto bg-white rounded-xl shadow-sm border border-purple-50 p-4 md:p-8 mb-4 min-h-fit pb-10" id="card-content">
                    <div class="mb-4">
                        <div class="flex justify-between items-start mb-2"><span class="bg-purple-100 text-purple-800 text-[10px] md:text-xs px-2 py-1 rounded font-bold uppercase" id="q-type">TYPE</span><span class="text-gray-400 text-[10px] font-mono bg-gray-100 px-1.5 py-0.5 rounded" id="q-id">#1</span></div>
                        <h3 class="text-base md:text-xl font-bold text-gray-800 leading-relaxed break-words" id="q-text">Loading...</h3>
                        <div id="multi-hint" class="hidden mt-2 text-xs font-bold text-purple-600 bg-purple-50 px-2 py-1 rounded inline-block"><i class="fas fa-check-double mr-1"></i>多选</div>
                    </div>
                    <div id="options-container" class="space-y-3"></div>
                    <div id="multi-actions" class="hidden mt-5"><button onclick="submitMultiAnswer()" class="w-full bg-purple-600 text-white py-3 rounded-xl font-bold text-sm shadow-lg active:bg-purple-700 active:shadow-none transition-all">提交答案</button></div>
                    <div id="feedback-area" class="mt-5 hidden rounded-lg p-3 border-l-4 bg-gray-50 text-sm break-words">
                        <div class="flex gap-3"><div id="feedback-icon" class="flex-shrink-0 mt-0.5"></div><div><div id="feedback-title" class="font-bold"></div><div id="feedback-msg" class="mt-1 text-gray-700 leading-relaxed"></div></div></div>
                    </div>
                    <div class="grid grid-cols-2 gap-3 mt-6 pt-4 border-t border-gray-100">
                        <button id="prev-btn" onclick="prevQuestion()" class="bg-white border border-gray-200 text-gray-600 py-2.5 rounded-lg font-bold text-sm active:bg-gray-50 disabled:opacity-50"><i class="fas fa-arrow-left mr-1"></i> 上一题</button>
                        <button id="next-btn" onclick="nextQuestion()" class="bg-purple-600 text-white py-2.5 rounded-lg font-bold text-sm shadow-md active:bg-purple-700 active:shadow-none">下一题 <i class="fas fa-arrow-right ml-1"></i></button>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        // 定义所有名词解释的标准答案库，确保 distractors 和 answers 使用完全一致的字符串
        const DEFS = {
            1: "Refers to the act and process of sending and receiving messages among people",
            2: "Refers to the process of the sender putting the message into a signal",
            3: "Refers to the process of the receiver interpreting the signal from the sender",
            4: "Refers to the occasion involved and the people in it",
            5: "Refers to communication norms in different cultures",
            6: "Refers to interpersonal communication between members of different cultures",
            7: "Refers to communication within and between businesses that involve people from more than one culture",
            8: "Refers to an overly simplified or generalized way of thinking about a person or a group",
            9: "Refers to the irrational dislike, suspicion or hatred of a particular group, race, religion, or sexual orientation",
            10: "Refers to the feeling of confusion or disorientation that one experiences when faced with a number of new and unfamiliar people or situations",
            11: "It is what distinguishes human beings from animals. It is an abstract entity which involves a number of usually manmade collective and shared artifacts, behavior patterns and values",
            12: "Values are at the core of culture and can be defined as the preferability of one belief over another; the system of criteria by which conduct is judged",
            13: "The idea of people taking care of themselves and their immediate families",
            14: "A cultural dimension that measures a society’s focus on the future",
            15: "A style of communication where people encode messages in the surrounding context (relationship, history) rather than in the explicit words",
            16: "The original language text of a translation",
            17: "The text into which it is translated",
            18: "Dictionary meaning or literal meaning",
            19: "Extended meaning or associated meaning",
            20: "The inability to understand what is meant by what is said",
            21: "Refers to communication without the use of words",
            22: "Refers to the rate, pitch, and volume qualities of the voice, which interrupt or temporarily take the place of speech and affect the meaning of a message",
            23: "Means paying attention to and doing only one thing at a time",
            24: "Means being involved with many things at once",
            25: "A paragraph that tells what the letter is about, is pleasant and says neither “yes” nor “no”",
            26: "A message starts with clearly stating the main idea, the request or the good news first, then include the details necessary and at last close cordially"
        };

        const DB = {
            matching_basic: [
                { id: 1, q: "Definition of: Racism", opts: ["Superior because of color of skin", "Anxiety from losing all familiar signs", "Rigid and irrational generalization about a group", "The belief that your own culture is correct"], ans: "Superior because of color of skin", exp: "Racism (种族主义) 指的是仅仅因为肤色或种族而产生的优越感。" },
                { id: 2, q: "Definition of: Culture Shock", opts: ["Anxiety from losing all familiar signs", "Superior because of color of skin", "Refers to communication norms in different cultures", "The feeling of confusion or disorientation"], ans: "Anxiety from losing all familiar signs", exp: "Culture Shock (文化冲击) 是指因为失去了熟悉的符号和环境而产生的焦虑感。" },
                { id: 3, q: "Definition of: Prejudice", opts: ["Rigid and irrational generalization about a group", "Superior because of color of skin", "Birds of a feather flock together", "Refers to the act and process of sending messages"], ans: "Rigid and irrational generalization about a group", exp: "Prejudice (偏见) 是对某一特定群体持有的一种僵化且非理性的概括或反感。" },
                { id: 4, q: "Definition of: Avoidance of the unfamiliar", opts: ["Birds of a feather flock together", "Your own culture is correct", "Rigid and irrational generalization about a group", "Paying attention to and doing only one thing at a time"], ans: "Birds of a feather flock together", exp: "Avoidance (回避不熟悉的事物) 常表现为'物以类聚' (Birds of a feather flock together)。" },
                { id: 5, q: "Definition of: Ethnocentrism", opts: ["Your own culture is correct", "Superior because of color of skin", "Anxiety from losing all familiar signs", "Refers to the process of the sender putting the message into a signal"], ans: "Your own culture is correct", exp: "Ethnocentrism (民族中心主义) 指认为自己的文化是正确的、优越的。" },
            ],
            // 使用 DEFS 常量重构数据，确保一致性
            matching_defs: [
                { id: 1, q: "Definition of: Communication", ans: DEFS[1], opts: [DEFS[1], DEFS[6], DEFS[5], DEFS[4]], exp: "Communication (沟通)。" },
                { id: 2, q: "Definition of: Encoding", ans: DEFS[2], opts: [DEFS[2], DEFS[3], DEFS[1], "The inability to understand what is meant by what is said"], exp: "Encoding (编码)。" },
                { id: 3, q: "Definition of: Decoding", ans: DEFS[3], opts: [DEFS[3], DEFS[2], DEFS[5], DEFS[19]], exp: "Decoding (解码)。" },
                { id: 4, q: "Definition of: Social context", ans: DEFS[4], opts: [DEFS[4], DEFS[5], DEFS[26], DEFS[7]], exp: "Social context (社会语境)。" },
                { id: 5, q: "Definition of: Cultural context", ans: DEFS[5], opts: [DEFS[5], DEFS[4], DEFS[6], DEFS[21]], exp: "Cultural context (文化语境)。" },
                { id: 6, q: "Definition of: Intercultural Communication", ans: DEFS[6], opts: [DEFS[6], DEFS[7], DEFS[1], DEFS[5]], exp: "Intercultural Communication (跨文化沟通)。" },
                { id: 7, q: "Definition of: Intercultural Business Communication", ans: DEFS[7], opts: [DEFS[7], DEFS[6], DEFS[1], DEFS[12]], exp: "Intercultural Business Communication (跨文化商务沟通)。" },
                { id: 8, q: "Definition of: Stereotyping", ans: DEFS[8], opts: [DEFS[8], DEFS[9], DEFS[10], "Belief that one is superior because of skin color"], exp: "Stereotyping (刻板印象)。" },
                { id: 9, q: "Definition of: Prejudice", ans: DEFS[9], opts: [DEFS[9], DEFS[8], DEFS[10], "Your own culture is correct"], exp: "Prejudice (偏见)。" },
                { id: 10, q: "Definition of: Cultural shock", ans: DEFS[10], opts: [DEFS[10], DEFS[8], DEFS[9], DEFS[5]], exp: "Cultural shock (文化冲击)。" },
                { id: 11, q: "Definition of: Culture", ans: DEFS[11], opts: [DEFS[11], DEFS[1], DEFS[5], DEFS[13]], exp: "Culture (文化)。" },
                { id: 12, q: "Definition of: Sociocultural values", ans: DEFS[12], opts: [DEFS[12], DEFS[13], DEFS[5], DEFS[18]], exp: "Sociocultural values (社会文化价值观)。" },
                { id: 13, q: "Definition of: Individualism", ans: DEFS[13], opts: [DEFS[13], DEFS[14], DEFS[23], DEFS[8]], exp: "Individualism (个人主义)。" },
                { id: 14, q: "Definition of: Long-term orientation", ans: DEFS[14], opts: [DEFS[14], DEFS[13], DEFS[15], DEFS[23]], exp: "Long-term orientation (长期导向)。" },
                { id: 15, q: "Definition of: High-context culture", ans: DEFS[15], opts: [DEFS[15], DEFS[23], DEFS[7], DEFS[18]], exp: "High-context culture (高语境文化)。" },
                { id: 16, q: "Definition of: Source text", ans: DEFS[16], opts: [DEFS[16], DEFS[17], DEFS[18], DEFS[19]], exp: "Source text (原文)。" },
                { id: 17, q: "Definition of: Target text", ans: DEFS[17], opts: [DEFS[17], DEFS[16], DEFS[18], DEFS[19]], exp: "Target text (译文/目标文本)。" },
                { id: 18, q: "Definition of: Denotational meaning", ans: DEFS[18], opts: [DEFS[18], DEFS[19], DEFS[20], DEFS[22]], exp: "Denotational meaning (字面义)。" },
                { id: 19, q: "Definition of: Connotational meaning", ans: DEFS[19], opts: [DEFS[19], DEFS[18], DEFS[20], DEFS[21]], exp: "Connotational meaning (内涵义)。" },
                { id: 20, q: "Definition of: Pragmatic failure/transfer", ans: DEFS[20], opts: [DEFS[20], DEFS[10], DEFS[1], DEFS[18]], exp: "Pragmatic failure (语用失误)。" },
                { id: 21, q: "Definition of: Nonverbal communication", ans: DEFS[21], opts: [DEFS[21], DEFS[22], DEFS[1], DEFS[5]], exp: "Nonverbal communication (非言语沟通)。" },
                { id: 22, q: "Definition of: Paralanguage", ans: DEFS[22], opts: [DEFS[22], DEFS[21], DEFS[23], DEFS[4]], exp: "Paralanguage (副语言)。" },
                { id: 23, q: "Definition of: Monochronic-time cultures", ans: DEFS[23], opts: [DEFS[23], DEFS[24], DEFS[14], DEFS[15]], exp: "Monochronic (单向时间)。" },
                { id: 24, q: "Definition of: Polychronic-time cultures", ans: DEFS[24], opts: [DEFS[24], DEFS[23], DEFS[21], DEFS[4]], exp: "Polychronic (多向时间)。" },
                { id: 25, q: "Definition of: Buffer", ans: DEFS[25], opts: [DEFS[25], DEFS[26], DEFS[22], DEFS[16]], exp: "Buffer (缓冲段)。" },
                { id: 26, q: "Definition of: Direct plan message", ans: DEFS[26], opts: [DEFS[26], DEFS[25], DEFS[15], DEFS[7]], exp: "Direct plan (直接法)。" }
            ],
            blanks: [
                { id: 1, q: "Communication Process: If I am talking with a friend, and I want to tell them I disagree with them. I, the (1)________, will put my thoughts into words.", ans: "sender", exp: "发送者 (Sender)。" },
                { id: 2, q: "Communication Process: I will put my thoughts into words, or (2)________ them.", ans: "encode", exp: "编码 (Encode)。" },
                { id: 3, q: "Communication Process: I will choose a communication (3)________ to transmit the message.", ans: "channel", exp: "渠道 (Channel)。" },
                { id: 4, q: "Communication Process: My friend will then be the (4)________ because I have transmitted a message to them.", ans: "receiver", exp: "接收者 (Receiver)。" },
                { id: 5, q: "Communication Process: They will (5)________ it to determine the meaning of what I have said.", ans: "decode", exp: "解码 (Decode)。" },
                { id: 6, q: "Cultural Elements: The first is (6)________ which contains items like arrow heads, electric lights and airplanes.", ans: "artifacts", exp: "器物 (Artifacts)。" },
                { id: 7, q: "Cultural Elements: The second element is (7)________ which involve things like the difference between right and wrong, the meaning of life etc. (Use one word)", ans: "values", exp: "价值观 (Values/Concepts)。" },
                { id: 8, q: "Cultural Elements: The third element is (8)________ which exemplifies how we “put into practice” the second element.", ans: "behaviors", exp: "行为 (Behaviors)。" },
                { id: 9, q: "Iceberg Model: The tip, the portion above the water, represents (9)________ elements of culture that can be seen by all.", ans: "visible", exp: "可见的 (visible)。" },
                { id: 10, q: "Iceberg Model: The cultural elements below the waterline are (10)________ and not readily recognized by those outside of our culture.", ans: "invisible", exp: "不可见的 (invisible)。" }
            ],
            mc: [
                {id:1, q:"_____ is the total accumulation of beliefs, customs, values, behaviors, institutions and communication patterns that are shared, learned and passed down through the generations in an identifiable group of people.", opts:["intercultural communication", "culture", "business communication", "feedback"], ans:"culture", exp:"Culture (文化) 是一个群体共享、习得并代代相传的信仰、习俗、行为等的总和。"},
                {id:2, q:"_____ is the communication at the same level in an organization.", opts:["horizontal communication", "ethnocentrism", "business communication", "lateral communication"], ans:"lateral communication", exp:"Lateral (或 Horizontal) communication 指组织中同一层级之间的沟通。"},
                {id:3, q:"_______ is the communication within business and administration, aiming at a common objective and profits for both the individuals and organizations.", opts:["lateral communication", "ethnocentrism", "business communication", "intercultural communication"], ans:"business communication", exp:"Business communication (商务沟通) 的目标是实现共同目标和利润。"},
                {id:4, q:"______ is a process by which information is exchanged between individuals through a common system of symbols, signs, or behavior.", opts:["ethnocentrism", "noise", "communication", "horizontal communication"], ans:"communication", exp:"Communication (沟通) 是通过符号系统交换信息的过程。"},
                {id:5, q:"_______ is the belief that your own cultural background... is superior.", opts:["culture", "communication", "ethnocentrism", "sender"], ans:"ethnocentrism", exp:"Ethnocentrism (民族中心主义) 指认为自己的文化优于其他文化。"},
                {id:6, q:"Power distance is a concept developed by Hofstede to describe ________________.", opts:["the extent to which the less powerful members of organizations and institutions (like the family) accept and expect that power is distributed unequally", "the power of multinational organizations", "the power differential between developed and less developed countries", "the power difference between men and women"], ans:"the extent to which the less powerful members of organizations and institutions (like the family) accept and expect that power is distributed unequally", exp:"权力距离 (Power Distance) 定义：弱势成员对权力不平等分配的接受和预期程度。"},
                {id:7, q:"The opinion that everyone has a position and clearly defined privileges is____.", opts:["a view of hierarchical structure of social relationship", "a view of group orientation of social relationship", "a view of individual orientation structure of social relationship", "none of the above"], ans:"a view of hierarchical structure of social relationship", exp:"Hierarchical structure (等级结构) 认为每个人都有明确的地位和特权。"},
                {id:8, q:"A person’s culture is ___________.", opts:["innate", "inborn", "learned", "accidental"], ans:"learned", exp:"文化是习得的 (Learned)，不是天生 (innate/inborn) 的。"},
                {id:9, q:"Being-in-becoming orientation stresses the idea of ____________.", opts:["development and growth", "reflection", "enjoyment of present life", "diligence"], ans:"development and growth", exp:"Being-in-becoming 强调个人的发展与成长 (development and growth)。"},
                {id:10, q:"The fundamental issue in the Power Distance Dimension is how a society handles _______ among people.", opts:["coordination", "conflicts", "equalities", "inequalities"], ans:"inequalities", exp:"权力距离的核心议题是社会如何处理人与人之间的不平等 (inequalities)。"},
                {id:11, q:"The High Uncertainty Avoidance dimension can be defined as the lack of _________for ambiguity and uncertainty.", opts:["tolerance", "understanding", "communication", "interaction"], ans:"tolerance", exp:"高不确定性规避意味着缺乏对模糊和不确定性的容忍度 (tolerance)。"},
                {id:12, q:"Collectivistic countries typically consist of people that can expect their relatives to look after them in exchange for _______.", opts:["loyalty", "identity", "agreement", "negotiation"], ans:"loyalty", exp:"在集体主义国家，人们以忠诚 (loyalty) 换取群体的保护。"},
                {id:13, q:"What is intercultural competence?", opts:["The ability to travel frequently", "The ability to communicate effectively and appropriately in intercultural situations based on one's intercultural knowledge, skills, and attitudes", "The ability to speak multiple languages fluently", "The ability to follow social media trends"], ans:"The ability to communicate effectively and appropriately in intercultural situations based on one's intercultural knowledge, skills, and attitudes", exp:"跨文化能力是指在跨文化情境中进行有效且得体沟通的能力。"},
                {id:14, q:"Which term refers to negatively judging aspects of another culture by the standards of one’s own culture?", opts:["Cultural relativism", "Ethnocentrism", "Stereotyping", "Prejudice"], ans:"Ethnocentrism", exp:"用自己文化的标准负面评价他国文化是 Ethnocentrism (民族中心主义)。"},
                {id:15, q:"Which is the first phase of intercultural shock?", opts:["Honeymoon phase", "cultural shock phase", "recovery phase", "adjustment phase"], ans:"Honeymoon phase", exp:"文化冲击的第一阶段通常是蜜月期 (Honeymoon phase)，此时对新文化充满新鲜感。"},
                {id:16, q:"Which is regarded as the “least intercultural” end of the continuum?", opts:["Intracultural communication", "Intercultural communication", "International communication", "Interracial communication"], ans:"Intracultural communication", exp:"Intracultural (文化内/族内) 沟通发生在同一文化成员之间，跨文化程度最低。"},
                {id:17, q:"What is the setting or situation within which communication takes place?", opts:["Channel", "Feedback", "Context", "Noise"], ans:"Context", exp:"Context (语境/情境) 是沟通发生的环境或背景。"},
                // MULTI-SELECT START
                {id:18, type:"multi", q:"Which of the following belongs to social communication: (Multi-select)", opts:["Interpersonal communication", "Intrapersonal communication", "Organizational communication", "Mass communication", "Animal communication"], ans:["Interpersonal communication", "Organizational communication", "Mass communication"], exp:"社会沟通包括人际、组织和大众传播。(Intrapersonal 是内省沟通，通常不归类为社会沟通)"},
                {id:19, type:"multi", q:"Intercultural business communication draws upon theories from a variety of disciplines, such as: (Multi-select)", opts:["Linguistics", "Education", "Psychology", "Sociology", "Mass communication"], ans:["Linguistics", "Education", "Psychology", "Sociology", "Mass communication"], exp:"跨文化商务沟通涉及语言学、教育学、心理学、社会学等多学科理论。"},
                {id:20, type:"multi", q:"Which terms describe negative attitudes or actions based on cultural differences? (Multi-select)", opts:["Prejudice", "Cultural relativism", "Racism", "Gender"], ans:["Prejudice", "Racism"], exp:"Prejudice (偏见) 和 Racism (种族主义) 都是基于差异的负面态度或行为。"},
                {id:21, type:"multi", q:"What may cause problems in intercultural communication? (Multi-select)", opts:["Ethnocentrism", "Stereotyping", "Prejudice", "Racism"], ans:["Ethnocentrism", "Stereotyping", "Prejudice", "Racism"], exp:"民族中心主义、刻板印象、偏见等都会阻碍跨文化沟通。"},
                {id:22, type:"multi", q:"How do you improve your intercultural business communication skills? (Multi-select)", opts:["Take the time to learn", "Practise self-awareness", "Seek assistance", "Incorporate what you’ve learned"], ans:["Take the time to learn", "Practise self-awareness", "Seek assistance", "Incorporate what you’ve learned"], exp:"学习、自我觉察、寻求帮助和实践都是提高技能的方法。"},
                // MULTI-SELECT END
                {id:23, q:"In intercultural communication studies, the values approach studies cultural differences in:", opts:["Dominant culture", "subculture", "co-culture", "sub-groups"], ans:"Dominant culture", exp:"Updated Key: A. Dominant culture. (Old key was co-culture)."},
                {id:24, q:"Which culture believes that human can master nature?", opts:["Chinese", "African", "Native Indian", "American"], ans:"American", exp:"美国文化倾向于认为人定胜天 (Master nature)。"},
                {id:25, q:"“What is different, is dangerous.” is the view of people from _____ culture.", opts:["high-context", "low-context", "high uncertainty avoidance", "low uncertainty avoidance"], ans:"high uncertainty avoidance", exp:"高不确定性规避 (High uncertainty avoidance) 的文化视“不同”为危险，因为他们害怕未知。"},
                {id:26, q:"Which culture belongs to low-context culture?", opts:["China", "Korea", "Germany", "Japan"], ans:"Germany", exp:"德国是典型的低语境 (low-context) 文化，沟通直接。中日韩属于高语境。"},
                // Question 27 - Multi-Select based on Doc
                {id:27, type:"multi", q:"Edward T. Hall categories culture to be either ____ or ____.", opts:["high-context", "low-context", "high power distance", "low power distance"], ans:["high-context", "low-context"], exp:"霍尔 (Hall) 将文化分类为高语境 (High-context) 和低语境 (Low-context)。"},
                {id:28, q:"Which of the following is NOT a basic element of culture?", opts:["personal preferences", "beliefs", "social practices", "norms"], ans:"personal preferences", exp:"个人喜好 (Personal preferences) 是个体的，不属于共享的文化要素。"},
                {id:29, q:"Which of the following belongs to the outermost layer of the onion model of culture?", opts:["Landmark architectures (Symbols)", "heroes", "rituals", "values"], ans:"Landmark architectures (Symbols)", exp:"洋葱模型的最外层是符号 (Symbols)，如地标建筑。核心是价值观。"},
                {id:30, q:"Which of the following is part of the tip of the iceberg model of culture?", opts:["beliefs", "norms", "food", "values"], ans:"food", exp:"食物 (Food) 属于可见的文化行为，位于冰山顶端。信仰、规范、价值观位于水下。"},
                {id:31, q:"When communicating in a high-context culture, the speaker is most likely to:", opts:["Explicitly state their message to avoid any confusion.", "Rely on body language and facial expressions to convey additional meaning.", "Focus on providing all necessary details in their verbal communication.", "Repeat themselves frequently to ensure the listener understands."], ans:"Rely on body language and facial expressions to convey additional meaning.", exp:"高语境文化依赖非言语线索（肢体语言、面部表情）和语境来传达意义。"},
                {id:32, q:"What does \"in-group collectivism\" reflect?", opts:["The importance of individual freedom", "Pride and loyalty to one's family or similar group", "High gender expectations", "Preference for direct communication"], ans:"Pride and loyalty to one's family or similar group", exp:"内群体集体主义反映了对家庭或群体的自豪感和忠诚。"},
                {id:33, q:"Which best describes low-context cultures?", opts:["Value expertise and performance.", "Agreement by relations and goodwill.", "They get down to business first.", "Negotiations are efficient."], ans:"They get down to business first.", exp:"低语境文化注重任务和效率，倾向于直接进入正题 (Get down to business)。"},
                {id:34, q:"Which best describes indirect communication?", opts:["Messages are explicit.", "Messages are high-context.", "Messages are plainly stated.", "Messages are low-context."], ans:"Messages are high-context.", exp:"间接沟通是高语境 (high-context) 文化的特征，信息隐含在语境中。"},
                {id:35, q:"The inductive reasoning style:", opts:["is direct communication.", "is indirect communication.", "goes from the specific to the general.", "goes from the general to the specific."], ans:"goes from the specific to the general.", exp:"归纳法 (Inductive) 是从具体事例推导出一般结论 (specific to general)。"},
                {id:36, q:"Denotational meanings are:", opts:["sports idioms.", "dictionary definitions.", "evolve over time.", "associated meanings."], ans:"dictionary definitions.", exp:"Denotational meaning 指的是词语的字面定义或字典定义。"},
                {id:37, q:"Linear language is best characterized by which of the following?", opts:["Subjective.", "Object oriented.", "Tradition Oriented.", "Circular in nature."], ans:"Object oriented.", exp:"线性语言 (Linear language) 通常是客观导向 (Object oriented) 和逻辑性强的。"},
                {id:38, type:"multi", q:"Which of the following is a variation of language?", opts:["dialect", "accent", "jargon", "slang"], ans:["dialect", "accent", "jargon", "slang"], exp:"Updated Key: All options (Dialect, Accent, Jargon, Slang) are variations of language."},
                {id:39, type:"multi", q:"Which of the following are necessary skills of a translator or an interpreter?", opts:["a high level of fluency in both source language and target language", "an extensive awareness of cultural differences", "the ability to find an equivalent word in the target language", "the ability to act a culture broker when occasions rise."], ans:["a high level of fluency in both source language and target language", "an extensive awareness of cultural differences", "the ability to find an equivalent word in the target language", "the ability to act a culture broker when occasions rise."], exp:"Updated Key: All skills listed are necessary."},
                {id:40, type:"multi", q:"Which statement is right about the relation of culture and language?", opts:["when a person uses a language, he is making cultural choices.", "language reflects cultural values", "learning a language means learning to see the world as a native speaker does.", "culture has an impact on language at various levels."], ans:["when a person uses a language, he is making cultural choices.", "language reflects cultural values", "learning a language means learning to see the world as a native speaker does.", "culture has an impact on language at various levels."], exp:"Updated Key: All statements accurately describe the relationship."},
                {id:41, type:"multi", q:"Which statement about color is right?", opts:["the color red means anger and danger in Japan", "the color yellow means caution and cowardice in Europe and North America", "the color green means fertility and strength in Arabic countries", "the color blue means villainy in Japan"], ans:["the color red means anger and danger in Japan", "the color yellow means caution and cowardice in Europe and North America", "the color green means fertility and strength in Arabic countries", "the color blue means villainy in Japan"], exp:"Updated Key: All options are considered correct cultural associations in their respective contexts according to the text."},
                {id:42, q:"Which number is unwelcome in the west?", opts:["4", "7", "6", "13"], ans:"13", exp:"数字 13 在西方文化中通常被认为是不吉利的。"},
                {id:43, q:"Which of the following statement is false?", opts:["In Chinese some kinship names like yeye, shushu etc. are used to dress both known and unknown people.", "In Chinese the most occupational titles can be used as address terms in Chinese", "In Chinese “吃过啦” is thought of as a greeting while in English a request for information", "In English, it is quite usual to greet someone as with “Professor Clark”"], ans:"In English, it is quite usual to greet someone as with “Professor Clark”", exp:"选项 D 在此题语境下被选为错误项（可能对比 First name basis 的普遍性）。"},
                {id:44, q:"Which of the following is not a good topic in Germany?", opts:["traveling", "architecture", "gardening", "world war II"], ans:"world war II", exp:"二战 (World War II) 在德国通常是一个敏感话题，不适合作为闲聊主题。"},
                {id:45, type:"multi", q:"Which is the feature an affective verbal style?", opts:["receiver-oriented", "process-oriented", "goal-oriented", "sender-oriented"], ans:["receiver-oriented", "process-oriented"], exp:"Updated Key: Affective style is both receiver-oriented and process-oriented."},
                {id:46, q:"Comparing with Chinese, which verbal styles do Americans tend to use?", opts:["Direct and self-effacement.", "Direct and self-enhancement.", "Indirect and self-effacement.", "Indirect and self-enhancement."], ans:"Direct and self-enhancement.", exp:"与中国人相比，美国人倾向于使用直接 (Direct) 和自我彰显 (Self-enhancement) 的风格。"},
                {id:47, q:"In which translation problem, can word order and syntactic function alter meaning a lot?", opts:["Lack of vocabulary equivalence.", "Lack of idiomatic equivalence.", "Lack of grammatical-syntactical equivalence.", "Lack of conceptual equivalence."], ans:"Lack of grammatical-syntactical equivalence.", exp:"语序和句法功能属于语法-句法对等 (Grammatical-syntactical equivalence) 的范畴。"},
                {id:48, q:"Which verbal style emphasizes the importance of boasting about one's accomplishments and abilities?", opts:["Direct.", "Indirect.", "Self-enhancement.", "Self-effacement."], ans:"Self-enhancement.", exp:"自我彰显 (Self-enhancement) 风格强调吹嘘或展示自己的成就。"},
                // MULTI-SELECT START
                {id:49, type:"multi", q:"What can lead to translation problems? (Multi-select)", opts:["Lack of vocabulary equivalence", "Lack of idiomatic equivalence", "Lack of grammatical-syntactical equivalence", "Lack of experiential equivalence", "Lack of conceptual equivalence"], ans:["Lack of vocabulary equivalence", "Lack of idiomatic equivalence", "Lack of grammatical-syntactical equivalence", "Lack of experiential equivalence", "Lack of conceptual equivalence"], exp:"词汇、习语、语法句法、经验和概念的对等性缺失都会导致翻译问题。"},
                // MULTI-SELECT END
                {id:50, q:"People in ______ cultures usually view silence as lack of communication and are generally ________ with it.", opts:["low context, uncomfortable", "high context, uncomfortable", "low context, comfortable", "high context, comfortable"], ans:"low context, uncomfortable", exp:"低语境文化 (low context) 的人通常视沉默为沟通中断，并对此感到不舒服 (uncomfortable)。"},
                {id:51, type:"multi", q:"Which statements are correct about nonverbal communication?", opts:["Nonverbal behavior is easily controlled", "A smile sometimes doesn’t mean a sincere smile", "Nonverbal behavior accounts for much of the meaning we derive from conversation.", "Nonverbal communication is more than the complement of verbal communication."], ans:["A smile sometimes doesn’t mean a sincere smile", "Nonverbal behavior accounts for much of the meaning we derive from conversation.", "Nonverbal communication is more than the complement of verbal communication."], exp:"Updated Key: B, C, D."},
                // Q52 - FIXED to Multi-Select (ABCD)
                {id:52, type:"multi", q:"How does nonverbal behavior control the pace or flow of communication?", opts:["Be silent", "Gesture of stopping", "Clap hands", "Raise voice"], ans:["Be silent", "Gesture of stopping", "Clap hands", "Raise voice"], exp:"所有选项（沉默、手势、拍手、提高声音）都是控制沟通节奏的非言语方式。"},
                // Question 53 - Multi-Select based on Doc
                {id:53, type:"multi", q:"Which of the following belongs to nonverbal communication?", opts:["keep a 50 cm personal distance from a client", "being 15 minutes late for a meeting", "avoiding eye contact when talking to a client", "silence in a negotiation"], ans:["keep a 50 cm personal distance from a client", "being 15 minutes late for a meeting", "avoiding eye contact when talking to a client", "silence in a negotiation"], exp:"所有选项（距离、时间观念、眼神接触、沉默）都属于非言语沟通的范畴。"},
                {id:54, type:"multi", q:"About eye contact, which of the following is right?", opts:["To look at someone in the eye in Japan is valued", "In Muslin countries men and women are not supposed to have much eye contact", "Chinese usually lower their eyes out of respect.", "In north America and northern Europe, eye contact shows openness, trustworthiness and integrity."], ans:["In Muslin countries men and women are not supposed to have much eye contact", "Chinese usually lower their eyes out of respect.", "In north America and northern Europe, eye contact shows openness, trustworthiness and integrity."], exp:"Updated Key: B, C, D are correct descriptions of eye contact norms."},
                {id:55, type:"multi", q:"Which of the following is right about the touch culture?", opts:["It refers to the culture whose people like to stand close while talking, touch more frequently and speak in louder voices", "Arabs, southern and western Europeans, Jews and Latins belong to touch culture", "Americans, northern Europeans and Orientals belong to no touch culture.", "For some cultures, it’s the powerful touch the less powerful, but the less powerful may not touch the powerful"], ans:["It refers to the culture whose people like to stand close while talking, touch more frequently and speak in louder voices", "Arabs, southern and western Europeans, Jews and Latins belong to touch culture", "Americans, northern Europeans and Orientals belong to no touch culture.", "For some cultures, it’s the powerful touch the less powerful, but the less powerful may not touch the powerful"], exp:"Updated Key: A, B, C, D. All statements are factually correct regarding touch culture classifications."},
                // Q56 - FIXED to Multi-Select (ABCD)
                {id:56, type:"multi", q:"Which of the following belong to paralanguage?", opts:["laugh", "silence", "fillers like “un-huh”", "volume"], ans:["laugh", "silence", "fillers like “un-huh”", "volume"], exp:"所有选项（笑、沉默、填充词、音量）都属于副语言 (Paralanguage)。"},
                {id:57, q:"______ letters will explain the purpose within the first two paragraphs, which reflects their value of time and directness.", opts:["Japan", "Chinese", "American", "Arab"], ans:"American", exp:"美式 (American) 信函通常在开头两段直接说明目的，体现了对时间和直接性的重视。"},
                {id:58, q:"_____ closing is trite and stereotyped by expressing wishes for receiver’s health or prosperity.", opts:["Japanese", "Chinese", "American", "Arab"], ans:"Japanese", exp:"Updated Key: A. Japanese. (While commonly Chinese, the Key specifies Japanese here, likely referring to season/health greetings in letters)."},
                {id:59, q:"Hall describes proxemics as having two main types of space: territory and _________ space.", opts:["public", "personal", "intimate", "interpersonal"], ans:"personal", exp:"霍尔的近体学包括领地观念和个人空间 (personal space)。"},
                {id:60, q:"Americans interpret their own custom of leaving the door open as a sign of American_________ .", opts:["discipline", "hospitality", "friendliness", "hatred"], ans:"friendliness", exp:"美国人办公室门敞开通常被视为友好 (friendliness) 的象征。"},
                {id:61, q:"_____ is the traditional way of greeting in Northeast Asian countries like Korea and Japan.", opts:["Bowing", "Firm handshake", "Embracing", "Handshake with slight pressure"], ans:"Bowing", exp:"鞠躬 (Bowing) 是日韩等东北亚国家的传统问候方式。"},
                {id:62, q:"Most Arabs, Mediterranean people, Indonesians and people in the Middle East evaluate closeness as _______. They belong to ______ cultures.", opts:["negative …low contact", "positive …high contact", "positive…low contact", "negative…high contact"], ans:"positive …high contact", exp:"阿拉伯和地中海地区的人视亲近为积极 (positive)，属于高接触 (high contact) 文化。"},
                {id:63, q:"Remember to avoid using _________ in greeting and eating in India.", opts:["the right hand", "the left hand", "the chopsticks", "the knives and forks"], ans:"the left hand", exp:"在印度，左手 (left hand) 被视为不洁，应避免用于吃饭或问候。"},
                {id:64, q:"In which country, it is inappropriate to use left hand to exchange business cards?", opts:["China", "Japan", "India", "USA"], ans:"India", exp:"同上，在印度不应用左手递名片。"},
                {id:65, q:"Which statement regarding touch is incorrect?", opts:["In Thailand, it is offensive to touch the head.", "Japan is considered a \"don't touch\" culture.", "Greece is considered a \"touch\" culture.", "In Latin American countries, touching between men is unacceptable."], ans:"In Latin American countries, touching between men is unacceptable.", exp:"选项 D 是错误的。在拉美国家，男性之间的身体接触（如拥抱）是常见且可接受的。"},
                {id:66, q:"__________ is who places a limp, lifeless hand sending only a negative message. (Dead fish)", opts:["a dead fish hand shaker", "knuckle cruncher", "sanitary hand shaker", "lingering hand shaker"], ans:"a dead fish hand shaker", exp:"'死鱼'式握手 (dead fish) 指手掌无力、毫无生气的握手方式，传达负面信息。"},
                {id:67, q:"When communicating with other people, remember that everyone wants to feel _______. (Choose best)", opts:["admired and cared for", "understood and important", "important, competent, and admired", "valued, respected, and understood"], ans:"valued, respected, and understood", exp:"沟通黄金法则：每个人都希望感到被重视、被尊重和被理解。"},
                {id:68, type:"multi", q:"Which statements are correct about Japan?", opts:["Japan smile the way people from the United States do.", "Women show their teeth when they smile in public.", "One does not show feelings freely.", "The clerk greets clients in banks with a deep bow instead of a smile."], ans:["One does not show feelings freely.", "The clerk greets clients in banks with a deep bow instead of a smile."], exp:"Updated Key: C, D. 日本文化较为内敛，通常不会随意表露情感。"},
                // MULTI-SELECT START
                {id:69, type:"multi", q:"What are commonly-used complimentary closings in business letter? (Multi)", opts:["Cordially", "Yours faithfully", "Your sincerely", "Best regards"], ans:["Cordially", "Yours faithfully", "Your sincerely", "Best regards"], exp:"Cordially, Yours faithfully, Yours sincerely 都是常见的商务信函结语。"},
                // MULTI-SELECT END
                {id:70, type:"multi", q:"In low-context cultures, a deliberate concealment of emotion is considered to be __________.", opts:["poker-faced", "shamed", "insincere", "resentful"], ans:["poker-faced", "insincere"], exp:"Updated Key: A, C. 在低语境文化中，刻意隐藏情感常被认为是不真诚或扑克脸。"}
            ],
            tf_a: [
                {id:1, q:"We are born with our cultural characteristics.", ans:"False", exp:"错误。文化是后天习得的 (learned)，并非与生俱来 (born with)。(Group A)"},
                {id:2, q:"What we eat is a biological process and how we eat it is cultural.", ans:"True", exp:"正确。'吃'是生物需求，但饮食习惯（如餐具、礼仪）是文化产物。"},
                {id:3, q:"We generally take our culture for granted.", ans:"False", exp:"错误 (Correct per Key)。我们通常对自己的文化习以为常，意识不到它的存在。(Note: Originally T, Key indicates F)."},
                {id:4, q:"The normal distribution indicates the most typical behaviors by the middle of the curve.", ans:"False", exp:"错误 (Correct per Key)。正态分布曲线的中间部分代表了最典型的行为模式。(Note: Originally T, Key indicates F)."},
                {id:5, q:"Customs, habits and preferences are in the visible part of the cultural iceberg.", ans:"False", exp:"错误 (Correct per Key)。习俗、习惯和偏好通常属于冰山水面以上可见的部分。(Note: Originally T, Key indicates F)."},
                {id:6, q:"Values are at the center of the cultural onion.", ans:"True", exp:"正确。洋葱模型中，价值观 (Values) 位于最核心。"},
                {id:7, q:"Individualist communication is mostly low context.", ans:"True", exp:"正确。个人主义倾向于直接、明确的低语境沟通。"},
                {id:8, q:"Collective communication is mostly low context.", ans:"False", exp:"错误。集体主义文化通常倾向于高语境 (High Context) 沟通。"},
                {id:9, q:"Individualist countries are more accepting of out groups.", ans:"True", exp:"正确。个人主义文化对内群体和外群体的区分较模糊，对外群体更开放。"},
                {id:10, q:"Collectivists are more apt to speak their mind and tell the truth.", ans:"True", exp:"正确 (Correct per Key)。(Note: Originally F, Key indicates T)."},
                {id:11, q:"Nonverbal communication can never be intentional.", ans:"False", exp:"错误。非言语沟通可以是有意为之的，例如手势、表情符号。(Group C)"},
                {id:12, q:"When we hold up our hand in the gesture that signifies a person to stop at the same time we actually say the word 'stop'. This implies one of the functions of nonverbal communication which is repeating.", ans:"True", exp:"正确。手势和语言同时表达相同意思，起到了'重复' (repeating) 的作用。"},
                {id:13, q:"Verbal communication uses symbols, but nonverbal communication does not.", ans:"False", exp:"错误。非言语沟通也使用符号，如手势、徽章等。"},
                {id:14, q:"When nonverbal behavior contradicts a verbal message, people tend to rely more on the verbal message because it happens at a more conscious level.", ans:"False", exp:"错误。当言行不一致，人们更倾向于相信非言语信息，因为它更难伪装。"},
                {id:15, q:"In U.S. society protruding one's tongue is an unmistakable gesture of mocking contempt, whereas in southern China it is an expression of embarrassment over a faux pas.", ans:"True", exp:"正确。吐舌头在美国代表嘲弄，在中国南方（传统上）代表尴尬或惊讶。"},
                {id:16, q:"Arabs believe that it is an act of friendship to 'breathe the breath' of the person with whom they converse and to feel their presence by smelling.", ans:"True", exp:"正确。阿拉伯文化属于高接触文化，近距离呼吸对方气息被视为友好。"},
                {id:17, q:"The Germans prefer a firm handshake, which is seen as a symbol of strength and character.", ans:"True", exp:"正确。德国人偏好有力地握手。"},
                {id:18, q:"In the US, raising one's voice often implies a lack of self-control.", ans:"False", exp:"错误。在美国，提高嗓门有时代表自信或强调；在亚洲文化中才更常被视为失控。"},
                {id:19, q:"In some Asian cultures, that students do not sit close to their teachers reflects privacy.", ans:"False", exp:"错误。这反映的是权力距离 (Power Distance) 和尊师重道，而非隐私。"},
                {id:20, q:"To some extent, Chinese culture is shifting form P-time to M-time.", ans:"True", exp:"正确。随着现代化，中国文化正逐渐从多向时间观向单向时间观转变。"},
                {id:21, q:"When compared to oral communication, writing is more accurate, more convincing, more economical and more efficient when sending messages to more people.", ans:"True", exp:"正确。书面沟通在准确性和传播效率上有优势。(Group D)"},
                {id:22, q:"Written communication reflects the writer's cultural background and values.", ans:"True", exp:"正确。写作风格深受文化背景影响。"},
                {id:23, q:"Communication is successful when both parties agree about the purpose of the communication.", ans:"True", exp:"正确。双方对沟通目的达成共识是成功的关键。"},
                {id:24, q:"Clarity and conciseness are important characteristics of business messages in any culture.", ans:"False", exp:"错误。在高语境文化中，含蓄和委婉可能比清晰简洁更重要。"},
                {id:25, q:"If you want to emphasize the confidentiality of your message, use a fax rather than a voice mail.", ans:"False", exp:"错误。传真容易被他人看到，保密性不如语音信箱或加密邮件。"},
                {id:26, q:"Direct plan is favored largely by relationship-oriented cultures while indirect plan is favored by result-oriented cultures.", ans:"False", exp:"错误。说反了。直接法适合结果导向文化，间接法适合关系导向文化。"},
                {id:27, q:"The use of a buffer in bad-messages is typical of the writing style of Latin American.", ans:"False", exp:"错误。Buffer (缓冲段) 是美国式“间接法”的典型特征。"},
                {id:28, q:"In the United States, bad news is generally presented in a direct fashion.", ans:"False", exp:"错误。特别注意：美国人平时沟通很直接，但传达【坏消息】时，为了礼貌和面子，通常使用间接法 (Indirect plan) 和缓冲段 (Buffer)。"},
                {id:29, q:"Persuasion is accomplished through a direct approach in low-context cultures.", ans:"True", exp:"正确 (Correct per Key). (Note: Originally F, Key indicates T)."},
                {id:30, q:"German reports stress content over form.", ans:"True", exp:"正确。德国报告注重实质内容和严谨性。"}
            ],
            tf_b: [
                {id:1, q:"Intercultural communication takes place between people whose cultural perception and symbol systems are exactly same.", ans:"False", exp:"错误。如果文化感知和符号系统完全相同，就不存在跨文化（Intercultural）沟通，而是文化内沟通。"},
                {id:2, q:"Receiver refers to the person who transmits a message.", ans:"False", exp:"错误。Receiver 是接收者，负责解码。Sender 才是发送（transmits）信息的人。"},
                {id:3, q:"The only way to improve your intercultural communication skills is taking the time to study and learn it.", ans:"True", exp:"正确。跨文化能力需要时间和有意识的学习来培养，不能仅靠直觉。"},
                {id:4, q:"Interethnic communication refers to communication between people of the same race but different ethnic backgrounds.", ans:"True", exp:"正确。跨族群沟通（Interethnic）发生在同一种族但不同族群背景的人之间。"},
                {id:5, q:"Intercultural business communication deals with the study of communication in intercultural and cross-cultural business contexts.", ans:"True", exp:"正确。这是跨文化商务沟通的基本定义。"},
                {id:6, q:"Decoding refers to the activity during which the sender must choose certain words or nonverbal methods to send an intentional message.", ans:"False", exp:"错误。这是编码（Encoding）的定义。解码（Decoding）是接收者解读信息的过程。"},
                {id:7, q:"Culture is all men’s medium; there is no aspect of human life that is not touched and altered by culture.", ans:"True", exp:"正确。文化是人类的媒介，渗透并改变了人类生活的方方面面。"},
                {id:8, q:"In the global village, neighbors communicate free of troubles and difficulties.", ans:"False", exp:"错误。全球村缩短了物理距离，但文化差异带来的沟通困难和冲突依然存在。"},
                {id:9, q:"Culture cannot be known without a study of communication, and communication can only be understood with an understanding of the culture it supports.", ans:"True", exp:"正确。文化与沟通密不可分，互为理解的基础。"},
                {id:10, q:"Chinese culture is high-context in comparison to western culture.", ans:"True", exp:"正确。相比西方（低语境），中国文化属于高语境文化，重视语境和非言语线索。"},
                {id:11, q:"Low-context communication is characterized by explicit speaking.", ans:"True", exp:"正确。低语境沟通强调用明确的语言直白地表达意思。"},
                {id:12, q:"Cultures with a large power distance are hierarchical cultures.", ans:"True", exp:"正确。高权力距离意味着社会等级制度森严，人们接受权力分配不平等。"},
                {id:13, q:"At the core of uncertainty avoidance is the idea that the future is predictable.", ans:"False", exp:"错误。不确定性规避的核心是对未知的恐惧，而不是认为未来可预测。"},
                {id:14, q:"In a culture emphasizing masculinity, it is more possible for men to play a nurturing role.", ans:"False", exp:"错误。男性气质（Masculinity）文化强调竞争和成就，性别角色分明；女性气质文化才强调关怀和生活质量。"},
                {id:15, q:"Culture is “that complex whole which includes knowledge, beliefs, art, morals, law, customs, and any other capabilities and habits acquired by man as a member of society”.", ans:"True", exp:"正确。这是爱德华·泰勒对文化的经典人类学定义。"},
                {id:16, q:"International communication takes place between such groups as African Americans and Latin Americans.", ans:"False", exp:"错误。这是跨族群（Interethnic）沟通。国际沟通通常指国家政府或机构之间的沟通。"},
                {id:17, q:"Factors like region, gender, age, race and ethnic groups, etc. are important to achieve appropriateness and effectiveness in communication.", ans:"True", exp:"正确。这些因素构成了沟通的社会文化背景，影响沟通的得体性和有效性。"},
                {id:18, q:"Culture is dynamic, which is ongoing and subject to change.", ans:"True", exp:"正确。文化不是静止的，它是动态发展和变化的。"},
                {id:19, q:"Communication barriers are caused by the same communication having different meaning in different cultures.", ans:"True", exp:"正确。同一符号在不同文化中意义不同（如手势、颜色），常导致误解。"},
                {id:20, q:"Intercultural conflicts are often caused by differences in value orientations.", ans:"True", exp:"正确。价值观差异是跨文化冲突的深层根源。"},
                {id:21, q:"Cultural orientation of controlling nature can also be seen in what is most controversial today, bioengineering and genetic programming.", ans:"True", exp:"正确。试图控制自然（Mastery over nature）的文化取向体现在基因工程等技术中。"},
                {id:22, q:"As a result of the rise of humanism in the West, the basic belief has changed to one of seeing humans as a mixture of good and evil.", ans:"True", exp:"正确。西方人性观受人文主义影响，趋向于认为人性是善恶混合的。"},
                {id:23, q:"We should try not to judge someone from another culture by our own cultural values.", ans:"True", exp:"正确。这体现了文化相对主义，避免民族中心主义。"},
                {id:24, q:"High uncertainty avoidance cultures feel more comfortable with ambiguity and risk-taking.", ans:"False", exp:"错误。高不确定性规避文化厌恶模糊和风险，偏好规则和确定性。"},
                {id:25, q:"Prejudice and racism can act as barriers to intercultural communication.", ans:"True", exp:"正确。偏见和种族主义严重阻碍有效的跨文化沟通。"},
                {id:26, q:"Nonverbal misinterpretations can lead to misunderstandings in intercultural communication.", ans:"True", exp:"正确。非言语信号（如眼神、距离）的误读常导致误解。"},
                {id:27, q:"High power distance cultures often have a greater acceptance of unequal power distribution.", ans:"True", exp:"正确。这是高权力距离文化的定义特征。"},
                {id:28, q:"Prejudice refers to the rational dislike, suspicion, or hatred of a particular group.", ans:"False", exp:"错误。偏见是“非理性”（irrational）的，基于缺乏证据的预判。"},
                {id:29, q:"Stereotyping is more broadly used to refer to negative or positive judgments made about individuals based on any observable or believed group membership.", ans:"True", exp:"正确。刻板印象既可以是正面的也可以是负面的，基于群体归属。"},
                {id:30, q:"Ethnocentrism refers to negatively judging aspects of another culture by the standards of one’s own culture.", ans:"True", exp:"正确。民族中心主义即以己度人，认为自己文化优越。"},
                {id:31, q:"The history of human communication is short.", ans:"False", exp:"错误。人类沟通的历史与人类历史一样漫长。"},
                {id:32, q:"Aristotle’s communication model is applicable to public speaking.", ans:"True", exp:"正确。亚里士多德模型侧重于修辞和公共演讲（Speaker-Audience）。"},
                {id:33, q:"In the communication process, encoding and decoding are the areas where misunderstands are most likely to happen.", ans:"True", exp:"正确。编码和解码环节涉及意义的转换，最容易出现偏差。"},
                {id:34, q:"If the message decoded is identical to the message encoded, communication is successful.", ans:"True", exp:"正确。信息还原准确，意图被正确理解，即沟通成功。"},
                {id:35, q:"In intercultural communication studies, the values approach is the most influential among all approaches.", ans:"True", exp:"正确。价值观研究（如 Hofstede, Kluckhohn & Strodtbeck）在跨文化研究中影响深远。"},
                {id:36, q:"People in low power distance cultures may not accept superiors’ orders and they often ask why.", ans:"True", exp:"正确。低权力距离文化强调平等，下属倾向于质疑权威，不盲从。"},
                {id:37, q:"Actions are much more important in Value-doing Culture.", ans:"True", exp:"正确。Doing culture（行动导向文化）重视行动、成就和效率。"},
                {id:38, q:"High-context Culture attaches great importance to verbal information.", ans:"False", exp:"错误。高语境文化重视非言语和语境信息，而非言语本身的明确性。"},
                {id:39, q:"Collectivism is characterized by a rigid social framework that distinguishes between in-groups and out-groups.", ans:"True", exp:"正确。集体主义文化对“自己人”（内群体）和“外人”（外群体）区分严格。"},
                {id:40, q:"About orientation toward time, people of past-oriented culture assume that today flow out of the legacy of the past and regarding history as context and teacher.", ans:"True", exp:"正确。过去导向文化重视传统、历史和先例。"},
                {id:41, q:"About orientation toward activity, people of doing-oriented culture assume that taking action is the most important activity.", ans:"True", exp:"正确。行动导向文化（如美国）认为“做”比“存在”更重要。"},
                {id:42, q:"The view of people in high uncertainty avoidance cultures can be summarized as “What is different is curious”.", ans:"False", exp:"错误。他们通常认为“不同的就是危险的”（What is different is dangerous）。低规避文化才认为不同是好奇。"},
                {id:43, q:"People in high power distance countries believe that power and authorities are facts of life.", ans:"True", exp:"正确。他们接受权力差异是社会生活的一部分。"},
                {id:44, q:"Categorization of high-context culture and low-context culture depending on the degree to which meaning comes from the settings or from the words being exchanged.", ans:"True", exp:"正确。这是霍尔划分高低语境的标准。"},
                {id:45, q:"In high-context messages, meaning is not necessarily contained in words.", ans:"True", exp:"正确。意义更多隐含在背景、关系和非言语中。"},
                {id:46, q:"Communication in high-context cultures tends to be implicit.", ans:"True", exp:"正确。沟通风格含蓄、委婉（Implicit）。"},
                {id:47, q:"Low-context cultures place less emphasis on nonverbal communication.", ans:"True", exp:"正确。低语境文化更依赖语言本身，非言语辅助作用相对较小（但依然存在）。"},
                {id:48, q:"Cultures are primarily learned through education.", ans:"False", exp:"错误。文化更多通过社会化、家庭耳濡目染习得（Learned），不仅仅是学校正规教育。"},
                {id:49, q:"Value is one basic element of culture.", ans:"True", exp:"正确。价值观是文化的核心要素。"},
                {id:50, q:"Language holds us together as groups and differentiates us into groups.", ans:"True", exp:"正确。语言具有凝聚内群体和区分外群体的双重功能。"},
                {id:51, q:"The Sami language of northern Scandinavia has 500 words for \"snow\", which indicates language as a reflection of the environment.", ans:"True", exp:"正确。语言反映了环境需求（词汇丰富度）。"},
                {id:52, q:"Sapir-Whorf hypothesis disagrees with Language determinism.", ans:"False", exp:"错误。萨丕尔-沃尔夫假说正是语言决定论/相对论的基础。"},
                {id:53, q:"Cricket in English is a happy insect... Yet in Chinese cricket signifies the coming of autumn, so there is always a feeling of sadness attached to it.", ans:"True", exp:"正确。同一事物（蟋蟀）在不同文化中引发不同的情感联想。"},
                {id:54, q:"Easterners tend to associate redness with something dangerous, threatening cruelty or blooding and communism.", ans:"False", exp:"错误。这是西方人对红色的联想；东方人通常认为红色代表吉祥、喜庆。"},
                
                // --- FIXED QUESTIONS BELOW ---
                {id:55, q:"Words in general use usually acquire connotational meanings.", ans:"False", exp:"False. (Fixed per Doc). Words in general use typically convey denotational (literal) meaning."},
                {id:56, q:"Inductive pattern is less indirect.", ans:"False", exp:"Incorrect. Inductive (specific to general) is usually considered MORE indirect (e.g. Chinese style) than Deductive. (Old key T -> New False)"},
                {id:57, q:"Members of low uncertainty avoidance cultures use the succinct style.", ans:"False", exp:"Incorrect. Succinct style (silence) is typically found in High Context/High UA cultures. (Old key T -> New False)"},
                {id:58, q:'In Chinese culture, kinship terms are not only used with one\'s own family, but also to other people (e.g., "police uncle").', ans:"True", exp:"正确。拟亲属称谓语（Fictive kinship terms）在中国文化中很常见。"},
                {id:59, q:"Translators and interpreters can be thought of as cultural brokers, as they must be sensitive to the contexts of intercultural communication.", ans:"True", exp:"正确。翻译不仅仅是语言转换，更是文化中介（Broker）。"},
                {id:60, q:"It is a pragmatic failure to greet an American with “Where are you going”.", ans:"True", exp:"Correct. 对美国人来说，问“去哪儿”侵犯隐私，属于语用失误 (Pragmatic Failure)。(Old key F -> New True)"},
                {id:61, q:"Regarding verbal style, Canada is direct, exacting, personal, instrumental.", ans:"True", exp:"Correct. 加拿大风格接近美国，属于低语境 (Direct/Exacting)。(Old key F -> New True)"},
                {id:62, q:"A good mastery of grammar of one language can guarantee a successful communication.", ans:"False", exp:"Incorrect. Grammar alone does NOT guarantee success; pragmatics and cultural competence are needed. (Old key T -> New False)"},
                {id:63, q:"In the indirect style, verbal statements clearly reveal the speaker’s intentions.", ans:"False", exp:"Incorrect. Indirect style HIDES or embeds intentions; it does not clearly reveal them. (Old key T -> New False)"},
                {id:64, q:"Self-effacement emphasizes the importance of humbling oneself via verbal restraints, hesitations and modest talk.", ans:"False", exp:"错误。（答案库为 F）。通常 Self-effacement 就是指谦虚。答案为 F 可能暗示其定义中有细节错误。"},
                {id:65, q:"The direct and indirect styles differ in whether the communicators reveal their intentions in the verbal way.", ans:"True", exp:"Correct. 直接与间接风格的区别正是在于是否用言语直接揭示意图。(Old key F -> New True)"},
                {id:66, q:"In English society, it is perfectly polite for people to accept the apology and say “I accept your apology”.", ans:"True", exp:"Correct (Per Key). Although pragmatically debated, the Textbook Key marks this as True. (Old key F -> New True)"},
                {id:67, q:"English is generally a nonlinear language.", ans:"False", exp:"错误。英语是典型的线性（linear）语言，逻辑呈直线型。"},
                {id:68, q:"Americans generally prefer inductive discourse patterns.", ans:"False", exp:"False. Americans generally prefer **deductive** (direct) discourse patterns (General to Specific). Inductive is typical of Asian/High-context cultures. (Corrected per user/doc verification)."},
                {id:69, q:"Collective and high context cultures prefer to use direct communication.", ans:"False", exp:"Incorrect. Collective/High Context cultures prefer INDIRECT communication. (Old key T -> New False)"},
                {id:70, q:"Exacting verbal communication is often found in Moderate uncertainty avoidance and high context cultures.", ans:"False", exp:"Incorrect. Per doc key (不考/False). Exacting is usually Low Context. (Old key T -> New False)"},
                {id:71, q:"What counts as polite behavior is cultural-specific and language-specific.", ans:"True", exp:"正确。礼貌的标准因文化和语言而异。"},
                {id:72, q:"Depending on the culture, a smile can indicate joy and amusement, it can also indicate embarrassment.", ans:"True", exp:"Correct. 在某些文化（如日本），微笑可以表示尴尬或掩饰困惑。(Old key F -> New True)"},
                {id:73, q:"Nonverbal behavior can reflect the speaker’s subconsciousness.", ans:"True", exp:"正确。非言语行为常被称为“泄露的渠道”，能反映潜意识。"},
                {id:74, q:"Intimate distance is most common when friends, old classmates, acquaintances and relatives talk.", ans:"False", exp:"错误。亲密距离（Intimate）仅限于极亲密的人（爱人、父母子女）。朋友熟人通常保持个人距离（Personal distance）。"},
                {id:75, q:"Posture is the position in which you hold your body when standing or sitting.", ans:"True", exp:"正确。这是姿势的基本定义。"},
                {id:76, q:"Americans often smile to cover up confusion or embarrassment.", ans:"False", exp:"错误。这是日本人的典型习惯，不是美国人。"},
                {id:77, q:"The British, like Americans, believe that looking someone directly in the eye is a mark of rudeness until a more intimate relationship is established.", ans:"True", exp:"正确。（答案库为 T）。尽管通常认为英美重视眼神接触，但此处遵循答案库 T (可能强调凝视 stare 为无礼)。"},
                {id:78, q:'The date in a business letter can be written as either "15 November 2012" or "Nov. 15, 2012".', ans:"True", exp:"正确。分别是英式和美式日期的标准写法。"},
                {id:79, q:"Written communication is the communication by means of written symbols, either printed or handwritten.", ans:"True", exp:"Correct. 书面沟通即通过书面符号（打印或手写）进行的沟通。(Old key F -> New True)"},
                {id:80, q:"Nonverbal codes play an important part in communication or intercultural communication. But it is not as important as verbal codes.", ans:"False", exp:"错误。研究表明，非言语信息往往比言语信息传达更多的情感和态度，更为重要。"},
                {id:81, q:"In Japan, people greet each other by bowing instead of shaking hands.", ans:"True", exp:"正确。鞠躬是日本传统的问候方式。"},
                {id:82, q:"Postures send same messages to all people, e.g. when you stand in an upright position, you impress others as being energetic.", ans:"True", exp:"正确。（答案库为 T）。虽然姿势有文化差异，但此处遵循答案库 T。"},
                {id:83, q:"The language in business conversations is always more formal than the language used in other conversations.", ans:"True", exp:"正确。（答案库为 T）。通常认为商务语言较正式。"},
                {id:84, q:"In feminine societies, men and women are considered socially unequal.", ans:"False", exp:"错误。女性气质社会（Feminine societies）强调性别平等和生活质量。"},
                {id:85, q:"Nonverbal behavior is significant because it spontaneously reflects the subconsciousness.", ans:"True", exp:"正确。非言语行为难以控制，更真实。"},
                {id:86, q:"Nonverbal communication can contradict a verbal message.", ans:"True", exp:"正确。当言行不一致时（Double bind），会出现矛盾。"},
                {id:87, q:"Latin Americans do not use buffers in a when organizing bad new messages. They avoid negative news completely.", ans:"True", exp:"正确。拉美文化倾向于为了维护关系而完全回避坏消息，而非仅仅使用缓冲技巧。"},
                {id:88, q:"Nonverbal communicated is rooted in culture.", ans:"True", exp:"正确。非言语规则深植于文化之中。"},
                {id:89, q:"Hissing is a rude way of indicating disapproval of a speaker in America, but is a normal way to ask for silence in certain Spanish speaking countries.", ans:"True", exp:"Correct. 在美国是喝倒彩，在西语国家是要求安静。说法正确。(Old key F -> New True)"},
                {id:90, q:"To North Americans squatting is civilized, proper, and sophisticated.", ans:"True", exp:"正确。（答案库为 T）。注意：通常认为蹲姿不雅，但此处遵循答案库 T。"},
                {id:91, q:"A firm handshake plus direct eye contact is the standard form of greeting in English-speaking countries.", ans:"True", exp:"正确。这是英语国家的标准问候礼仪。"},
                {id:92, q:"People from high-context cultures were observed standing closer talking to someone.", ans:"True", exp:"正确。高语境文化（通常也是高接触文化）的人际距离通常更近。"},
                {id:93, q:"In Polychronic-time cultures, personal relationships are subordinated to schedules.", ans:"False", exp:"错误。多向时间（P-time）文化中，人际关系高于时间表。单向时间（M-time）才是时间表至上。"},
                {id:94, q:"The length of time one has to wait to see another person sends a message.", ans:"True", exp:"正确。等待时间传达了关于地位、权力和重要性的非言语信息。"},
                {id:95, q:"Punctuality and promptness are two striking features of Monochronic time cultures.", ans:"True", exp:"正确。守时是单向时间文化的显著特征。"},
                {id:96, q:"Punctual rules vary based on whether it’s a social meeting or a business meeting.", ans:"True", exp:"正确。社交场合和商务场合对守时的要求通常不同。"}
            ]
        };

        // --- 应用状态 ---
        let currentModule = 'matching_basic';
        let currentQuestionIndex = 0;
        let isShuffled = false;
        let questionOrder = [];
        let isProcessing = false;
        let currentMultiSelection = [];

        // --- DOM 缓存 ---
        const dom = {
            sidebar: document.getElementById('sidebar'),
            overlay: document.getElementById('mobile-overlay'),
            title: document.getElementById('module-title'),
            progress: document.getElementById('progress-text'),
            bar: document.getElementById('progress-bar'),
            qType: document.getElementById('q-type'),
            qId: document.getElementById('q-id'),
            qText: document.getElementById('q-text'),
            opts: document.getElementById('options-container'),
            fbArea: document.getElementById('feedback-area'),
            fbTitle: document.getElementById('feedback-title'),
            fbMsg: document.getElementById('feedback-msg'),
            fbIcon: document.getElementById('feedback-icon'),
            navBtns: document.querySelectorAll('.nav-btn'),
            shuffle: document.getElementById('shuffle-toggle'),
            jump: document.getElementById('jump-input'),
            multiActions: document.getElementById('multi-actions'),
            multiHint: document.getElementById('multi-hint'),
            prevBtn: document.getElementById('prev-btn'),
            nextBtn: document.getElementById('next-btn')
        };

        // --- 初始化 ---
        function init() {
            // 默认全屏，防止 iOS 滚动链
            document.body.style.overscrollBehavior = 'none';
            switchModule('matching_basic');
        }

        // --- 侧边栏逻辑 ---
        function toggleSidebar() {
            const isClosed = dom.sidebar.classList.contains('-translate-x-full');
            
            if (isClosed) {
                // 打开
                dom.sidebar.classList.remove('-translate-x-full');
                dom.overlay.classList.remove('hidden');
                // 动画延迟
                setTimeout(() => dom.overlay.classList.remove('opacity-0'), 10);
            } else {
                // 关闭
                dom.sidebar.classList.add('-translate-x-full');
                dom.overlay.classList.add('opacity-0');
                setTimeout(() => dom.overlay.classList.add('hidden'), 300);
            }
        }

        // --- 核心逻辑 ---
        function switchModule(moduleName) {
            currentModule = moduleName;
            currentQuestionIndex = 0;
            isProcessing = false;
            
            // 更新 UI
            dom.navBtns.forEach(btn => {
                btn.classList.remove('nav-active');
                if(btn.id === `nav-${moduleName}`) btn.classList.add('nav-active');
            });
            dom.title.textContent = getModuleTitle(moduleName);
            
            // 手机端自动收起侧边栏
            if (window.innerWidth < 768) {
                dom.sidebar.classList.add('-translate-x-full');
                dom.overlay.classList.add('opacity-0');
                setTimeout(() => dom.overlay.classList.add('hidden'), 300);
            }

            generateOrder();
            renderQuestion();
        }

        function getModuleTitle(m) {
            const map = {
                'matching_basic': '核心连线',
                'matching_defs': '名词解释',
                'blanks': '理论填空',
                'mc': '选择题',
                'tf_a': '判断题 I',
                'tf_b': '判断题 II'
            };
            return map[m] || 'Module';
        }

        function toggleShuffle() {
            isShuffled = dom.shuffle.checked;
            currentQuestionIndex = 0;
            generateOrder();
            renderQuestion();
        }

        function generateOrder() {
            const total = DB[currentModule].length;
            questionOrder = Array.from({length: total}, (_, i) => i);
            if(isShuffled) {
                // Fisher-Yates Shuffle
                for(let i = questionOrder.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [questionOrder[i], questionOrder[j]] = [questionOrder[j], questionOrder[i]];
                }
            }
        }

        function jumpToQuestion() {
            const val = parseInt(dom.jump.value);
            if (val > 0 && val <= DB[currentModule].length) {
                currentQuestionIndex = val - 1; 
                renderQuestion();
                dom.jump.value = '';
            }
        }

        function renderQuestion() {
            const realIndex = questionOrder[currentQuestionIndex];
            const qData = DB[currentModule][realIndex];
            const total = DB[currentModule].length;

            // Reset UI States
            dom.fbArea.classList.add('hidden');
            dom.multiActions.classList.add('hidden');
            dom.multiHint.classList.add('hidden');
            currentMultiSelection = [];
            
            // Update Headers
            dom.progress.textContent = `${currentQuestionIndex + 1} / ${total}`;
            dom.bar.style.width = `${((currentQuestionIndex + 1) / total) * 100}%`;
            dom.qId.textContent = `#${qData.id}`;
            dom.qType.textContent = getModuleTitle(currentModule).split(' ')[0]; // 简短标题
            dom.qText.textContent = qData.q;
            
            // Buttons State
            dom.prevBtn.disabled = currentQuestionIndex === 0;
            
            // Clear Options
            dom.opts.innerHTML = '';

            // Render Input for Blanks
            if (currentModule === 'blanks') {
                dom.opts.innerHTML = `
                    <div class="flex gap-2">
                        <input type="text" id="blank-input" class="flex-1 p-3 border-2 border-purple-200 rounded-lg outline-none focus:border-purple-500 transition font-bold text-gray-700" placeholder="请输入答案..." autocomplete="off">
                        <button onclick="submitBlank()" class="bg-purple-600 text-white px-4 rounded-lg font-bold">检查</button>
                    </div>
                `;
                // Focus slightly delayed for mobile keyboard
                // setTimeout(() => document.getElementById('blank-input').focus(), 100);
            } 
            // Render Multi-select
            else if (qData.type === 'multi') {
                dom.multiActions.classList.remove('hidden');
                dom.multiHint.classList.remove('hidden');
                qData.opts.forEach(opt => createBtn(opt, qData, true));
            } 
            // Render Single-select (TF or MC)
            else if (currentModule.startsWith('tf')) {
                ['True', 'False'].forEach(opt => createBtn(opt, qData, false));
            } 
            else {
                // Shuffle options for normal MC/Matching (if needed, otherwise keep order)
                // Using spread to avoid mutating original
                const opts = [...qData.opts];
                // simple shuffle for display
                opts.sort(() => Math.random() - 0.5);
                opts.forEach(opt => createBtn(opt, qData, false));
            }
        }

        function createBtn(text, qData, isMulti) {
            const btn = document.createElement('button');
            // Tailored classes for mobile touch targets
            btn.className = 'option-btn w-full text-left p-4 rounded-lg border-2 border-purple-100 bg-white text-gray-700 font-medium text-sm md:text-base leading-snug flex items-center justify-between group touch-manipulation';
            
            if (isMulti) {
                btn.innerHTML = `<span class="flex-1 mr-2">${text}</span> <i class="far fa-square text-purple-300 text-lg"></i>`;
                btn.onclick = () => toggleMultiSelect(btn, text);
            } else {
                btn.textContent = text;
                btn.onclick = () => checkSingle(btn, text, qData);
            }
            dom.opts.appendChild(btn);
        }

        function toggleMultiSelect(btn, text) {
            const icon = btn.querySelector('i');
            if (currentMultiSelection.includes(text)) {
                currentMultiSelection = currentMultiSelection.filter(t => t !== text);
                btn.classList.remove('option-selected');
                icon.className = 'far fa-square text-purple-300 text-lg';
            } else {
                currentMultiSelection.push(text);
                btn.classList.add('option-selected');
                icon.className = 'fas fa-check-square text-purple-600 text-lg';
            }
        }

        function checkSingle(btn, selected, qData) {
            if(isProcessing) return;
            
            // Disable all siblings
            const allBtns = dom.opts.querySelectorAll('button');
            allBtns.forEach(b => b.disabled = true);

            const isCorrect = (selected === qData.ans);

            if (isCorrect) {
                btn.className = 'w-full text-left p-4 rounded-lg border-2 border-green-500 bg-green-50 text-green-900 font-bold flex justify-between items-center';
                btn.innerHTML = `<span>${selected}</span> <i class="fas fa-check-circle text-green-600"></i>`;
                showFeedback(true, qData.exp || "Correct!");
                autoNext();
            } else {
                btn.className = 'w-full text-left p-4 rounded-lg border-2 border-red-500 bg-red-50 text-red-900 font-bold flex justify-between items-center shake';
                btn.innerHTML = `<span>${selected}</span> <i class="fas fa-times-circle text-red-600"></i>`;
                
                // Highlight correct one
                allBtns.forEach(b => {
                    if (b.textContent === qData.ans) {
                        b.className = 'w-full text-left p-4 rounded-lg border-2 border-green-500 bg-white text-green-900 font-bold opacity-80 flex justify-between items-center';
                        b.innerHTML = `<span>${qData.ans}</span> <i class="fas fa-check text-green-600"></i>`;
                    }
                });

                // --- SMART FEEDBACK LOGIC ---
                let feedbackMsg = "";
                
                // For matching modules, check if the wrong answer is actually correct for another term
                if (currentModule.startsWith('matching')) {
                    const match = DB[currentModule].find(item => item.ans === selected);
                    if (match) {
                        // Extract term name from "Definition of: X"
                        const wrongTerm = match.q.replace(/Definition of:\s*/i, "").trim();
                        feedbackMsg += `<div class="mb-2 text-red-700 font-medium"><i class="fas fa-times-circle mr-1"></i> 注意：您选择的选项实际上是 <b>${wrongTerm}</b> 的定义。</div>`;
                    }
                }
                
                feedbackMsg += `<div class="text-green-800"><i class="fas fa-check-circle mr-1"></i> <b>正确解析:</b> ${qData.exp || qData.ans}</div>`;
                showFeedback(false, feedbackMsg);
            }
        }

        function submitMultiAnswer() {
            if(isProcessing) return;
            const realIndex = questionOrder[currentQuestionIndex];
            const qData = DB[currentModule][realIndex];
            const correctArr = qData.ans; // Array

            // Sort both for comparison
            const userSorted = [...currentMultiSelection].sort();
            const correctSorted = [...correctArr].sort();
            const isCorrect = JSON.stringify(userSorted) === JSON.stringify(correctSorted);

            const allBtns = dom.opts.querySelectorAll('button');
            allBtns.forEach(b => b.disabled = true);
            dom.multiActions.classList.add('hidden');

            if (isCorrect) {
                showFeedback(true, qData.exp || "All correct!");
                autoNext();
            } else {
                showFeedback(false, qData.exp ? `解析: ${qData.exp}` : `Correct: ${correctArr.join(', ')}`);
            }

            // Visual feedback on buttons
            allBtns.forEach(b => {
                const text = b.querySelector('span').textContent;
                const isSelected = currentMultiSelection.includes(text);
                const isActuallyCorrect = correctArr.includes(text);
                const icon = b.querySelector('i');

                // Reset base classes
                b.className = 'w-full text-left p-4 rounded-lg border-2 flex justify-between items-center font-medium text-sm md:text-base';

                if (isSelected && isActuallyCorrect) {
                    // Correctly selected
                    b.classList.add('border-green-500', 'bg-green-50', 'text-green-900');
                    icon.className = 'fas fa-check-circle text-green-600';
                } else if (isSelected && !isActuallyCorrect) {
                    // Wrongly selected
                    b.classList.add('border-red-500', 'bg-red-50', 'text-red-900');
                    icon.className = 'fas fa-times-circle text-red-600';
                } else if (!isSelected && isActuallyCorrect) {
                    // Missed correct answer
                    b.classList.add('border-green-500', 'bg-white', 'text-green-900', 'opacity-70');
                    icon.className = 'fas fa-check text-green-600';
                } else {
                    // Irrelevant
                    b.classList.add('border-gray-100', 'bg-gray-50', 'text-gray-400');
                    icon.className = 'far fa-square text-gray-300';
                }
            });
        }

        function submitBlank() {
            if(isProcessing) return;
            const realIndex = questionOrder[currentQuestionIndex];
            const qData = DB[currentModule][realIndex];
            const input = document.getElementById('blank-input');
            const val = input.value.trim().toLowerCase();
            
            // Flexible matching for "concepts / values"
            const answers = qData.ans.toLowerCase().split('/').map(s => s.trim());
            const isMatch = answers.some(a => val === a) || val === qData.ans.toLowerCase();

            input.disabled = true;
            
            if (isMatch) {
                input.classList.add('border-green-500', 'bg-green-50', 'text-green-900');
                showFeedback(true, qData.exp || "Correct!");
                autoNext();
            } else {
                input.classList.add('border-red-500', 'bg-red-50', 'text-red-900', 'shake');
                showFeedback(false, `正确答案: ${qData.ans}。${qData.exp || ''}`);
            }
        }

        function showFeedback(success, msg) {
            dom.fbArea.classList.remove('hidden');
            const color = success ? 'green' : 'red';
            dom.fbArea.className = `mt-5 rounded-lg p-3 border-l-4 bg-${color}-50 border-${color}-500 text-sm md:text-base break-words fade-in`;
            
            dom.fbIcon.innerHTML = success 
                ? `<i class="fas fa-check-circle text-xl text-${color}-500"></i>`
                : `<i class="fas fa-info-circle text-xl text-${color}-500"></i>`;
            
            dom.fbTitle.textContent = success ? '回答正确' : '解析';
            dom.fbTitle.className = `font-bold text-${color}-800`;
            
            dom.fbMsg.innerHTML = msg;
            dom.fbMsg.className = `mt-1 text-${color}-900 leading-relaxed`;
        }

        function autoNext() {
            isProcessing = true;
            setTimeout(() => {
                // 如果是最后一题，不自动跳转，让用户看结果
                if (currentQuestionIndex < DB[currentModule].length - 1) {
                    nextQuestion();
                }
                isProcessing = false;
            }, 1000);
        }

        function nextQuestion() {
            if (currentQuestionIndex < DB[currentModule].length - 1) {
                currentQuestionIndex++;
                renderQuestion();
            } else {
                alert("本模块复习完成！");
            }
        }

        function prevQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                renderQuestion();
            }
        }

        // Boot
        init();

    </script>
</body>
</html>
